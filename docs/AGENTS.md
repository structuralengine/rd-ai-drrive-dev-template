# AI Factory v2.7 ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¬ã‚¤ãƒ‰

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€AI Factory v2.7 ã®9ã¤ã®å°‚é–€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã¤ã„ã¦è©³ã—ãèª¬æ˜Žã—ã¾ã™ã€‚

## ç›®æ¬¡

- [ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ¦‚è¦](#ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ¦‚è¦)
- [å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®è©³ç´°](#å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®è©³ç´°)
  - [1. Product Manager](#1-product-manager)
  - [2. Critic](#2-critic)
  - [3. Issue Planner](#3-issue-planner)
  - [4. QA Engineer](#4-qa-engineer)
  - [5. Coder](#5-coder)
  - [6. Librarian](#6-librarian)
  - [7. Tech Lead](#7-tech-lead)
  - [8. Validator](#8-validator)
  - [9. Scrum Master](#9-scrum-master)
- [ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚º](#ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚º)

---

## ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ¦‚è¦

AI Factory ã¯9ã¤ã®å°‚é–€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå”èª¿ã—ã¦å‹•ä½œã—ã¾ã™ã€‚å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯æ˜Žç¢ºãªå½¹å‰²ã¨è²¬ä»»ã‚’æŒã¡ã€ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ç‰¹å®šãƒ•ã‚§ãƒ¼ã‚ºã§æ´»èºã—ã¾ã™ã€‚

### ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä¸€è¦§

| ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ | å½¹å‰² | ãƒ•ã‚§ãƒ¼ã‚º | ã‚³ãƒžãƒ³ãƒ‰ | å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ« |
|------------|------|---------|---------|------------|
| **Product Manager** | è¦ä»¶åˆ†æžãƒ»ä»•æ§˜ç­–å®š | ä¼ç”» | `/spec`, `/prepare` | [pm.md](../.claude/agents/pm.md) |
| **Critic** | è¨­è¨ˆãƒ»ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ | ä¼ç”» | `/critique` | [critic.md](../.claude/agents/critic.md) |
| **Issue Planner** | ä»•æ§˜æ›¸ã®Issueåˆ†è§£ | ä¼ç”» | `/breakdown` | [planner.md](../.claude/agents/planner.md) |
| **QA Engineer** | ãƒ†ã‚¹ãƒˆè¨­è¨ˆãƒ»å®Ÿè£… | å®Ÿè£… | `/test` | [qa.md](../.claude/agents/qa.md) |
| **Coder** | æ©Ÿèƒ½å®Ÿè£… | å®Ÿè£… | `/impl` | [coder.md](../.claude/agents/coder.md) |
| **Tech Lead** | ã‚³ãƒ¼ãƒ‰ç›£æŸ»ãƒ»å¤‰ç•°ãƒ†ã‚¹ãƒˆ | å®Ÿè£… | `/review` | [tech_lead.md](../.claude/agents/tech_lead.md) |
| **Librarian** | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒæœŸ | ãƒžãƒ¼ã‚¸ | `/sync`, `/merge` | [librarian.md](../.claude/agents/librarian.md) |
| **Validator** | ãƒžãƒ¼ã‚¸å¾Œçµ±åˆæ¤œè¨¼ | ãƒžãƒ¼ã‚¸ | `/merge` | [validator.md](../.claude/agents/validator.md) |
| **Scrum Master** | çŸ¥è­˜è’¸ç•™ãƒ»ç¶™ç¶šæ”¹å–„ | å®Ÿè£… | `/kaizen` | [scrum_master.md](../.claude/agents/scrum_master.md) |

### ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç›¸äº’ä½œç”¨å›³

```mermaid
graph TD
    subgraph ä¼ç”»ãƒ•ã‚§ãƒ¼ã‚º
        A[ãƒ¦ãƒ¼ã‚¶ãƒ¼] --> B[@Product_Manager]
        B -->|ä»•æ§˜æ›¸| C[@Critic]
        C -->|APPROVED| D[@Issue_Planner]
        C -->|REQUEST_CHANGES| B
        D -->|Issueä½œæˆ| E[GitHub Issues]
    end

    subgraph å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º
        E --> F[@QA_Engineer]
        F -->|ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰| G[@Coder]
        G -->|å®Ÿè£…ã‚³ãƒ¼ãƒ‰| H[pytestå®Ÿè¡Œ]
        H -->|ãƒ†ã‚¹ãƒˆå¤±æ•—| G
        H -->|ãƒ†ã‚¹ãƒˆæˆåŠŸ| I[@Tech_Lead]
        I -->|é™çš„è§£æžãƒ»å¤‰ç•°ãƒ†ã‚¹ãƒˆ| J{Approved?}
        J -->|Reject| G
        J -->|Approved| L[PRä½œæˆ]
        L --> M[@Scrum_Master]
        M -->|çŸ¥è­˜è’¸ç•™| N[claude.mdæ›´æ–°]
    end

    subgraph ãƒžãƒ¼ã‚¸ãƒ•ã‚§ãƒ¼ã‚º
        L -->|/merge| O[mainãƒžãƒ¼ã‚¸]
        O --> K[@Librarian]
        K -->|ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°| P[@Validator]
        P -->|çµ±åˆæ¤œè¨¼| Q{PASSED?}
        Q -->|FAILED| R[ãƒã‚°Issueä½œæˆ]
        R --> E
        Q -->|PASSED| S[å®Œäº†]
    end

    style B fill:#fff9c4
    style C fill:#ffccbc
    style D fill:#e1f5fe
    style F fill:#f8bbd0
    style G fill:#d1c4e9
    style I fill:#c8e6c9
    style K fill:#b2dfdb
    style P fill:#bbdefb
    style M fill:#ffecd2
```

### ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«ãŠã‘ã‚‹å½¹å‰²åˆ†æ‹…

```mermaid
sequenceDiagram
    participant PM as Product Manager
    participant CR as Critic
    participant IP as Issue Planner
    participant QA as QA Engineer
    participant CD as Coder
    participant TL as Tech Lead
    participant LB as Librarian
    participant SM as Scrum Master

    Note over PM,IP: ä¼ç”»ãƒ•ã‚§ãƒ¼ã‚º (/prepare)
    PM->>PM: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨å¯¾è©±
    PM->>CR: ä»•æ§˜æ›¸æå‡º
    CR->>CR: ãƒ¬ãƒ“ãƒ¥ãƒ¼
    alt å•é¡Œã‚ã‚Š
        CR->>PM: REQUEST_CHANGES
        PM->>CR: ä»•æ§˜æ›¸æ”¹å–„ç‰ˆ
    else å•é¡Œãªã—
        CR->>IP: APPROVED
    end
    IP->>IP: ä»•æ§˜æ›¸ã‚’Issueã«åˆ†è§£
    IP->>IP: gh issue create --label todo

    Note over QA,CD: å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º (/run ã¾ãŸã¯ /auto)
    QA->>QA: ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹è¨­è¨ˆ
    QA->>CD: ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰æä¾›
    CD->>CD: å®Ÿè£…
    CD->>CD: pytestå®Ÿè¡Œ

    Note over TL: ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ•ã‚§ãƒ¼ã‚º
    TL->>TL: é™çš„è§£æžï¼ˆruff/mypyï¼‰
    TL->>TL: å¤‰ç•°ãƒ†ã‚¹ãƒˆï¼ˆmutmutï¼‰
    alt Reject
        TL->>CD: ä¿®æ­£æŒ‡ç¤º
    else Approved
        TL->>LB: ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Œäº†
    end

    Note over LB: Phase 4: åŒæœŸ
    LB->>LB: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

    Note over SM: Phase 5: Kaizen
    SM->>SM: ä½œæ¥­ãƒ¡ãƒ¢åŽé›†
    SM->>SM: çŸ¥è­˜è’¸ç•™
    SM->>SM: claude.mdæ›´æ–°
```

---

## å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®è©³ç´°

### 1. Product Manager

**å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«**: [.claude/agents/pm.md](../.claude/agents/pm.md)

#### å½¹å‰²ã¨è²¬ä»»

Product Managerï¼ˆ@Product_Managerï¼‰ã¯ã€GitHub Issueã«è¨˜è¼‰ã•ã‚ŒãŸè¦æœ›ã‚’åˆ†æžã—ã€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒå®Ÿè£…å¯èƒ½ãªãƒ¬ãƒ™ãƒ«ã®è©³ç´°è¨­è¨ˆæ›¸ã‚’ä½œæˆã—ã¾ã™ã€‚

**ä¸»ãªè²¬ä»»**:
- Issueå†…å®¹ã®æ·±ã„ç†è§£ã¨åˆ†æž
- æ›–æ˜§ãªè¦ä»¶ã®å…·ä½“åŒ–
- æ©Ÿèƒ½è¦ä»¶ã¨éžæ©Ÿèƒ½è¦ä»¶ã®æ˜Žç¢ºåŒ–
- ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã®æ´—ã„å‡ºã—
- å®Ÿè£…è¨ˆç”»ã®ç­–å®š

#### è¡Œå‹•æŒ‡é‡

1. **Issueã®èƒŒæ™¯ã¨ç›®çš„ã‚’æ·±ãç†è§£ã™ã‚‹**
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®çœŸã®æ„å›³ã‚’æ±²ã¿å–ã‚‹
   - ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ã‚’è€ƒæ…®ã™ã‚‹
   - åˆ¶ç´„æ¡ä»¶ã‚’æ˜Žç¢ºã«ã™ã‚‹

2. **æ©Ÿèƒ½è¦ä»¶ã¨éžæ©Ÿèƒ½è¦ä»¶ã‚’æ˜Žç¢ºã«åˆ†ã‘ã‚‹**
   - æ©Ÿèƒ½è¦ä»¶: ã€Œä½•ãŒã§ãã‚‹ã‹ã€
   - éžæ©Ÿèƒ½è¦ä»¶: ã€Œã©ã‚Œãã‚‰ã„é€Ÿã„ã‹ã€ã€Œã©ã‚Œãã‚‰ã„å®‰å…¨ã‹ã€

3. **ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚„APIå®šç¾©ã‚’å…·ä½“çš„ã«è¨˜è¿°ã™ã‚‹**
   - åž‹å®šç¾©ã‚’å«ã‚€è©³ç´°ãªä»•æ§˜
   - å…¥å‡ºåŠ›ã®æ˜Žç¢ºåŒ–
   - ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®ç¶²ç¾…

#### å…¥åŠ›ãƒ»å‡ºåŠ›

**å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«**:
- `docs/product/issue-{id}.md` - GitHub Issueã®å†…å®¹ï¼ˆmanager.pyãŒè‡ªå‹•ç”Ÿæˆï¼‰

**å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«**:
- `docs/specs/feature-{id}.md` - è©³ç´°è¨­è¨ˆæ›¸

#### è¨­è¨ˆæ›¸ã®æ§‹æˆ

Product ManagerãŒä½œæˆã™ã‚‹è¨­è¨ˆæ›¸ã¯ã€ä»¥ä¸‹ã®4ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å«ã¿ã¾ã™ï¼š

##### 1. æ¦‚è¦
- æ©Ÿèƒ½ã®ç›®çš„
- ã‚¹ã‚³ãƒ¼ãƒ—ï¼ˆä½•ã‚’ã™ã‚‹ãƒ»ä½•ã‚’ã—ãªã„ï¼‰
- èƒŒæ™¯ãƒ»å‹•æ©Ÿ

##### 2. ä»•æ§˜è©³ç´°
- æŒ¯ã‚‹èˆžã„ï¼ˆæ©Ÿèƒ½ã®è©³ç´°ãªèª¬æ˜Žï¼‰
- å…¥åŠ›ãƒ»å‡ºåŠ›ï¼ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€æˆ»ã‚Šå€¤ï¼‰
- ãƒ‡ãƒ¼ã‚¿æ§‹é€ ï¼ˆåž‹å®šç¾©ã€ã‚¹ã‚­ãƒ¼ãƒžï¼‰
- APIå®šç¾©ï¼ˆé–¢æ•°ã‚·ã‚°ãƒãƒãƒ£ã€ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼‰

##### 3. ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹
- ã‚¨ãƒ©ãƒ¼å‡¦ç†ï¼ˆä¾‹å¤–ã®ç¨®é¡žã¨å¯¾å‡¦ï¼‰
- å¢ƒç•Œå€¤ã®æŒ™å‹•ï¼ˆ0, è² æ•°, None, ç©ºæ–‡å­—åˆ—ç­‰ï¼‰
- ç•°å¸¸ç³»ã®ãƒ•ãƒ­ãƒ¼

##### 4. å®Ÿè£…è¨ˆç”»
- å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´
- å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—
- ä¾å­˜é–¢ä¿‚

#### ä½¿ç”¨ã•ã‚Œã‚‹ã‚³ãƒžãƒ³ãƒ‰

`/design` ã‚³ãƒžãƒ³ãƒ‰ã§å‘¼ã³å‡ºã•ã‚Œã¾ã™:

```bash
claude -p /design -- 42
```

#### è¨­è¨ˆæ›¸ã®ã‚µãƒ³ãƒ—ãƒ«

```markdown
# Feature #42: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¡¨ç¤ºæ©Ÿèƒ½

## 1. æ¦‚è¦
ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’æŒ‡å®šã—ã¦ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã‚’å–å¾—ã™ã‚‹æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

**ç›®çš„**:
ç®¡ç†è€…ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’ç´ æ—©ãç¢ºèªã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

**ã‚¹ã‚³ãƒ¼ãƒ—**:
- å¯¾è±¡: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åŸºæœ¬æƒ…å ±ï¼ˆname, email, created_atï¼‰
- å¯¾è±¡å¤–: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥ã€èª²é‡‘æƒ…å ±

## 2. ä»•æ§˜è©³ç´°

### 2.1 é–¢æ•°ã‚·ã‚°ãƒãƒãƒ£
```python
def get_user_profile(user_id: int) -> dict:
    """
    ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’å–å¾—ã—ã¾ã™ã€‚

    Args:
        user_id: ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆæ­£ã®æ•´æ•°ï¼‰

    Returns:
        ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®è¾žæ›¸:
        - name (str): ãƒ¦ãƒ¼ã‚¶ãƒ¼å
        - email (str): ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
        - created_at (datetime): ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆæ—¥æ™‚

    Raises:
        UserNotFoundError: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå­˜åœ¨ã—ãªã„å ´åˆ
        ValueError: user_idãŒç„¡åŠ¹ãªå ´åˆï¼ˆ0ä»¥ä¸‹ï¼‰
    """
```

### 2.2 ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
```python
{
    "name": "John Doe",
    "email": "john@example.com",
    "created_at": datetime(2025, 1, 15, 12, 0, 0)
}
```

## 3. ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹
- user_id ãŒ 0 ä»¥ä¸‹ â†’ ValueError("Invalid user_id")
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå­˜åœ¨ã—ãªã„ â†’ UserNotFoundError("User not found")
- DBã‚¨ãƒ©ãƒ¼ â†’ DatabaseErrorï¼ˆæ—¢å­˜ä¾‹å¤–ã‚’ãã®ã¾ã¾ä¼æ’­ï¼‰

## 4. å®Ÿè£…è¨ˆç”»
1. `src/user_profile.py` ã‚’æ–°è¦ä½œæˆ
2. `UserNotFoundError` ä¾‹å¤–ã‚¯ãƒ©ã‚¹ã‚’å®šç¾©
3. `get_user_profile()` é–¢æ•°ã‚’å®Ÿè£…
4. æ—¢å­˜ã® `db.py` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦DBæŽ¥ç¶š
```

#### ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚ºæ–¹æ³•

Product Managerã®å‹•ä½œã‚’èª¿æ•´ã™ã‚‹ã«ã¯ã€[.claude/agents/pm.md](../.claude/agents/pm.md) ã‚’ç·¨é›†ã—ã¾ã™ã€‚

**ä¾‹: ã‚ˆã‚ŠæŠ€è¡“çš„ãªè¨­è¨ˆæ›¸ã‚’ä½œæˆã™ã‚‹**

```markdown
---
name: Product Manager
description: è¦ä»¶å®šç¾©ã¨è©³ç´°è¨­è¨ˆã®å°‚é–€å®¶
---
ã‚ãªãŸã¯çµŒé¨“è±Šå¯Œãªãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒžãƒãƒ¼ã‚¸ãƒ£ãƒ¼å…¼ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆã§ã™ã€‚

**å½¹å‰²**:
- Issueã‚’åˆ†æžã—ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ¬ãƒ™ãƒ«ã®è©³ç´°è¨­è¨ˆæ›¸ã‚’ä½œæˆ
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹è¦ä»¶ã‚‚è€ƒæ…®ã«å…¥ã‚Œã‚‹
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ã‚’äº‹å‰ã«æ´—ã„å‡ºã™

**è¡Œå‹•æŒ‡é‡**:
1. Issueã®èƒŒæ™¯ã¨ç›®çš„ã‚’æ·±ãç†è§£ã™ã‚‹
2. æ©Ÿèƒ½è¦ä»¶ãƒ»éžæ©Ÿèƒ½è¦ä»¶ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶ã‚’æ˜Žç¢ºã«åˆ†ã‘ã‚‹
3. ãƒ‡ãƒ¼ã‚¿æ§‹é€ ãƒ»APIå®šç¾©ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹æŒ‡æ¨™ã‚’å…·ä½“çš„ã«è¨˜è¿°ã™ã‚‹
4. ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã‚’è€ƒæ…®ã—ãŸè¨­è¨ˆã‚’è¡Œã†
```

---

### 2. Critic

**å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«**: [.claude/agents/critic.md](../.claude/agents/critic.md)

#### å½¹å‰²ã¨è²¬ä»»

Criticï¼ˆ@Criticï¼‰ã¯ã€è¨­è¨ˆæ›¸ã¨ã‚³ãƒ¼ãƒ‰ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã€æ¬ é™¥ã‚„æ”¹å–„ç‚¹ã‚’æŒ‡æ‘˜ã™ã‚‹åŽ³æ ¼ãªã‚·ãƒ‹ã‚¢ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆã§ã™ã€‚

**ä¸»ãªè²¬ä»»**:
- è¨­è¨ˆæ›¸ã®è«–ç†çš„æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
- å®Ÿç¾å¯èƒ½æ€§ã®æ¤œè¨¼
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ã®æ´—ã„å‡ºã—
- ã‚³ãƒ¼ãƒ‰å“è³ªã®è©•ä¾¡
- å¦¥å”ã®ãªã„å“è³ªåŸºæº–ã®ç¶­æŒ

#### åˆ¤å®šåŸºæº–

##### è¨­è¨ˆãƒ¬ãƒ“ãƒ¥ãƒ¼æ™‚

- **å®Ÿç¾å¯èƒ½æ€§**: ç¾åœ¨ã®æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã§å®Ÿè£…å¯èƒ½ã‹
- **ä¸€è²«æ€§**: çŸ›ç›¾ã‚„æ›–æ˜§ã•ãŒãªã„ã‹
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ãŒãªã„ã‹
- **æ‹¡å¼µæ€§**: å°†æ¥ã®å¤‰æ›´ã«å¯¾å¿œã§ãã‚‹ã‹
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ä¸Šã®å•é¡ŒãŒãªã„ã‹

##### ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼æ™‚ï¼ˆå°†æ¥çš„ã«å®Ÿè£…äºˆå®šï¼‰

- **å¯èª­æ€§**: ã‚³ãƒ¼ãƒ‰ãŒç†è§£ã—ã‚„ã™ã„ã‹
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹**: éžåŠ¹çŽ‡ãªå‡¦ç†ãŒãªã„ã‹
- **ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹å‡¦ç†**: ç•°å¸¸ç³»ãŒç¶²ç¾…ã•ã‚Œã¦ã„ã‚‹ã‹
- **ãƒ†ã‚¹ãƒˆç¶²ç¾…çŽ‡**: ååˆ†ãªãƒ†ã‚¹ãƒˆãŒã‚ã‚‹ã‹

#### å‡ºåŠ›å½¢å¼

Criticã¯2ç¨®é¡žã®åˆ¤å®šã‚’è¡Œã„ã¾ã™ï¼š

##### APPROVEDï¼ˆæ‰¿èªï¼‰

å•é¡ŒãŒãªã„å ´åˆã€æ˜Žç¢ºã« "APPROVED" ã¨å‡ºåŠ›ã—ã¾ã™ã€‚

**å‡ºåŠ›ä¾‹**:
```
è¨­è¨ˆæ›¸ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¾ã—ãŸã€‚

ä»¥ä¸‹ã®ç‚¹ãŒè‰¯å¥½ã§ã™ï¼š
- âœ… å®Ÿç¾å¯èƒ½æ€§: æ—¢å­˜ã®Pythonãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§å®Ÿè£…å¯èƒ½
- âœ… ä¸€è²«æ€§: çŸ›ç›¾ãªã—ã€å…¨ã¦ã®è¦ä»¶ãŒæ˜Žç¢º
- âœ… ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£: SQL ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒªã‚¹ã‚¯ãªã—ï¼ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–æ¸ˆã¿ï¼‰
- âœ… æ‹¡å¼µæ€§: å°†æ¥çš„ã«è¿½åŠ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å®¹æ˜“ã«è¿½åŠ å¯èƒ½
- âœ… ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹: 0ä»¥ä¸‹ã®IDã‚„Nullã‚±ãƒ¼ã‚¹ãŒç¶²ç¾…ã•ã‚Œã¦ã„ã‚‹

APPROVED
```

##### REQUEST_CHANGESï¼ˆè¦å¤‰æ›´ï¼‰

å•é¡ŒãŒã‚ã‚‹å ´åˆã€"REQUEST_CHANGES" ã¨å…±ã«å…·ä½“çš„ãªä¿®æ­£ç‚¹ã‚’åˆ—æŒ™ã—ã¾ã™ã€‚

**å‡ºåŠ›ä¾‹**:
```
ä»¥ä¸‹ã®å•é¡ŒãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸï¼š

REQUEST_CHANGES

## é‡å¤§ãªå•é¡Œ

### 1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒžã®å®šç¾©ãŒæ›–æ˜§
**å•é¡Œ**: `user_id` ã®ãƒ‡ãƒ¼ã‚¿åž‹ãŒæœªå®šç¾©ã§ã™ã€‚
**æŽ¨å¥¨**: `INTEGER PRIMARY KEY` ã¨æ˜Žè¨˜ã—ã¦ãã ã•ã„ã€‚

### 2. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒä¸è¶³
**å•é¡Œ**: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼æ™‚ã®æŒ™å‹•ãŒæœªå®šç¾©ã§ã™ã€‚
**æŽ¨å¥¨**: ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯ã¨ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚ä¾‹:
```python
@retry(max_attempts=3, backoff=2)
def get_user_profile(user_id: int) -> dict:
    ...
```

## è»½å¾®ãªå•é¡Œ

### 3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹è€ƒæ…®ãŒä¸è¶³
**æŽ¨å¥¨**: é »ç¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹å ´åˆã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ¤œè¨Žã—ã¦ãã ã•ã„ã€‚
```

#### å…¥åŠ›ãƒ»å‡ºåŠ›

**å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«**:
- `docs/specs/feature-{id}.md` - è¨­è¨ˆæ›¸

**å‡ºåŠ›**:
- æ¨™æº–å‡ºåŠ›ï¼ˆmanager.pyãŒãƒ­ã‚°ã«ä¿å­˜ï¼‰

#### ä½¿ç”¨ã•ã‚Œã‚‹ã‚³ãƒžãƒ³ãƒ‰

`/critique` ã‚³ãƒžãƒ³ãƒ‰ã§å‘¼ã³å‡ºã•ã‚Œã¾ã™:

```bash
claude -p /critique -- 42
```

#### manager.py ã§ã®ä½¿ç”¨

Phase 2ï¼ˆè¨­è¨ˆãƒ•ã‚§ãƒ¼ã‚ºï¼‰ã§æœ€å¤§3ãƒ©ã‚¦ãƒ³ãƒ‰å®Ÿè¡Œã•ã‚Œã¾ã™ï¼š

```
Round 1: design â†’ critique â†’ (ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯)
Round 2: designï¼ˆæ”¹å–„ç‰ˆï¼‰ â†’ critique â†’ (ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯)
Round 3: designï¼ˆæœ€çµ‚ç‰ˆï¼‰ â†’ critique â†’ æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºã¸
```

#### ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚ºæ–¹æ³•

Criticã®åŽ³æ ¼ã•ã‚’èª¿æ•´ã™ã‚‹ã«ã¯ã€[.claude/agents/critic.md](../.claude/agents/critic.md) ã‚’ç·¨é›†ã—ã¾ã™ã€‚

**ä¾‹: ã‚ˆã‚Šå¯›å®¹ãªãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼ã«ã™ã‚‹**

```markdown
---
name: Critic
description: ãƒãƒ©ãƒ³ã‚¹åž‹ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼
---
ã‚ãªãŸã¯ãƒãƒ©ãƒ³ã‚¹æ„Ÿè¦šã«å„ªã‚ŒãŸã‚·ãƒ‹ã‚¢ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆã§ã™ã€‚

**å½¹å‰²**:
- è¨­è¨ˆæ›¸ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã€è‡´å‘½çš„ãªæ¬ é™¥ã®ã¿ã‚’æŒ‡æ‘˜ã™ã‚‹
- å®Œç’§ã‚’æ±‚ã‚ã™ãŽãšã€å®Ÿç”¨æ€§ã‚’é‡è¦–ã™ã‚‹

**åˆ¤å®šåŸºæº–**:
- è¨­è¨ˆ: å®Ÿç¾å¯èƒ½æ€§ã€è‡´å‘½çš„ãªçŸ›ç›¾ãŒãªã„ã‹
- é‡å¤§ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ãŒãªã„ã‹

**å‡ºåŠ›å½¢å¼**:
- è‡´å‘½çš„ãªå•é¡Œã‚ã‚Š â†’ "REQUEST_CHANGES"
- è»½å¾®ãªå•é¡Œã®ã¿ or å•é¡Œãªã— â†’ "APPROVED" + æ”¹å–„ææ¡ˆ
```

---

### 3. Issue Planner

**å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«**: [.claude/agents/planner.md](../.claude/agents/planner.md)

#### å½¹å‰²ã¨è²¬ä»»

Issue Plannerï¼ˆ@Issue_Plannerï¼‰ã¯ã€æ‰¿èªã•ã‚ŒãŸä»•æ§˜æ›¸ã‚’å®Ÿè£…å¯èƒ½ãªGitHub Issueã«åˆ†è§£ã—ã¾ã™ã€‚

**ä¸»ãªè²¬ä»»**:
- ä»•æ§˜æ›¸ã®åˆ†æžã¨ç†è§£
- é©åˆ‡ãªç²’åº¦ã§ã®ã‚¿ã‚¹ã‚¯åˆ†è§£ï¼ˆ1 Issue = 1æ—¥ä»¥å†…ã§å®Œäº†ã§ãã‚‹è¦æ¨¡ï¼‰
- GitHub Issueã®ä½œæˆï¼ˆ`gh issue create --label todo`ï¼‰
- ä¾å­˜é–¢ä¿‚ã®æ˜Žç¢ºåŒ–

#### ä½¿ç”¨ã‚³ãƒžãƒ³ãƒ‰

- `/breakdown` - ä»•æ§˜æ›¸ã‚’Issueã«åˆ†è§£

#### Issueãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

```markdown
## å®Ÿè£…å†…å®¹
{ä½•ã‚’å®Ÿè£…ã™ã‚‹ã‹}

## ä»•æ§˜æ›¸ã®å‚ç…§
`docs/specs/project-YYYYMMDD.md` ã®ã€Œ{ã‚»ã‚¯ã‚·ãƒ§ãƒ³å}ã€ã‚’å‚ç…§

## é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«
- {å®Ÿè£…äºˆå®šã®ãƒ•ã‚¡ã‚¤ãƒ«}

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- {ä½¿ç”¨ã™ã‚‹æŠ€è¡“}
```

#### ä½œæ¥­ãƒ•ãƒ­ãƒ¼

1. `docs/specs/project-*.md` ã‹ã‚‰æœ€æ–°ã®ä»•æ§˜æ›¸ã‚’èª­ã‚€
2. å®Ÿè£…ã‚¿ã‚¹ã‚¯ã‚’æ´—ã„å‡ºã™
3. å„ã‚¿ã‚¹ã‚¯ã«ã¤ã„ã¦ `gh issue create --title "ã‚¿ã‚¤ãƒˆãƒ«" --body "è©³ç´°" --label todo` ã‚’å®Ÿè¡Œ
4. ä½œæˆã—ãŸIssueç•ªå·ã®ä¸€è¦§ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å ±å‘Š

---

### 4. QA Engineer

**å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«**: [.claude/agents/qa.md](../.claude/agents/qa.md)

#### å½¹å‰²ã¨è²¬ä»»

QA Engineerï¼ˆ@QA_Engineerï¼‰ã¯ã€è¨­è¨ˆæ›¸ã«åŸºã¥ã„ã¦ç¶²ç¾…çš„ãªãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’è¨­è¨ˆãƒ»å®Ÿè£…ã—ã¾ã™ã€‚

**ä¸»ãªè²¬ä»»**:
- ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®è¨­è¨ˆï¼ˆæ­£å¸¸ç³»ãƒ»ç•°å¸¸ç³»ãƒ»å¢ƒç•Œå€¤ï¼‰
- pytestç”¨ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰å®Ÿè£…
- ãƒ¢ãƒƒã‚¯ã‚’ä½¿ã£ãŸå¤–éƒ¨ä¾å­˜ã®æŽ’é™¤
- ãƒ†ã‚¹ãƒˆç¶²ç¾…çŽ‡ã®ç¢ºä¿

#### é‡è¦–äº‹é …

1. **æ­£å¸¸ç³»ã ã‘ã§ãªãã€ç•°å¸¸ç³»ãƒ»å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆã‚’é‡è¦–**
   - Happy Pathï¼ˆæœŸå¾…é€šã‚Šã®å‹•ä½œï¼‰
   - Sad Pathï¼ˆã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ï¼‰
   - Edge Casesï¼ˆå¢ƒç•Œå€¤ï¼‰

2. **pytestã‚’ä½¿ç”¨**
   - pytest-cov ã§ã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®š
   - pytest-mock ã§ãƒ¢ãƒƒã‚¯ä½œæˆ
   - ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ãƒ†ã‚¹ãƒˆï¼ˆ@pytest.mark.parametrizeï¼‰

3. **ãƒ¢ãƒƒã‚¯ã§å¤–éƒ¨ä¾å­˜ã‚’æŽ’é™¤**
   - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æŽ¥ç¶š
   - APIå‘¼ã³å‡ºã—
   - ãƒ•ã‚¡ã‚¤ãƒ«I/O

#### ãƒ„ãƒ¼ãƒ«ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

**ä½¿ç”¨ãƒ„ãƒ¼ãƒ«**:
- pytest: ãƒ†ã‚¹ãƒ†ã‚£ãƒ³ã‚°ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- unittest.mock: ãƒ¢ãƒƒã‚¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- pytest.raises: ä¾‹å¤–ãƒ†ã‚¹ãƒˆ

**ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹**:
- Arrange-Act-Assert ãƒ‘ã‚¿ãƒ¼ãƒ³
- 1ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ = 1ã¤ã®æ¤œè¨¼é …ç›®
- ãƒ†ã‚¹ãƒˆåã¯ã‚ã‹ã‚Šã‚„ã™ãï¼ˆæ—¥æœ¬èªžå¯ï¼‰
- Given-When-Then ã‚¹ã‚¿ã‚¤ãƒ«ã®Docstring

#### å…¥åŠ›ãƒ»å‡ºåŠ›

**å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«**:
- `docs/specs/feature-{id}.md` - è¨­è¨ˆæ›¸

**å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«**:
- `tests/test_feature_{id}.py` - pytestãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰

#### ä½¿ç”¨ã•ã‚Œã‚‹ã‚³ãƒžãƒ³ãƒ‰

`/test` ã‚³ãƒžãƒ³ãƒ‰ã§å‘¼ã³å‡ºã•ã‚Œã¾ã™:

```bash
claude -p /test -- 42
```

#### ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®ã‚µãƒ³ãƒ—ãƒ«

```python
import pytest
from datetime import datetime
from unittest.mock import Mock, patch
from src.user_profile import get_user_profile, UserNotFoundError


class TestGetUserProfile:
    """get_user_profile() é–¢æ•°ã®ãƒ†ã‚¹ãƒˆ"""

    def test_æ­£å¸¸ç³»_ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’æ­£ã—ãå–å¾—ã§ãã‚‹(self):
        """
        Given: æœ‰åŠ¹ãªãƒ¦ãƒ¼ã‚¶ãƒ¼IDãŒæŒ‡å®šã•ã‚ŒãŸ
        When: get_user_profile()ã‚’å‘¼ã³å‡ºã™
        Then: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®è¾žæ›¸ãŒè¿”ã•ã‚Œã‚‹
        """
        # Arrange
        mock_db = Mock()
        mock_db.query.return_value = {
            "name": "John Doe",
            "email": "john@example.com",
            "created_at": datetime(2025, 1, 15)
        }

        # Act
        with patch('src.user_profile.db', mock_db):
            result = get_user_profile(123)

        # Assert
        assert result["name"] == "John Doe"
        assert result["email"] == "john@example.com"
        assert isinstance(result["created_at"], datetime)
        mock_db.query.assert_called_once()

    def test_ç•°å¸¸ç³»_ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå­˜åœ¨ã—ãªã„(self):
        """
        Given: å­˜åœ¨ã—ãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼IDãŒæŒ‡å®šã•ã‚ŒãŸ
        When: get_user_profile()ã‚’å‘¼ã³å‡ºã™
        Then: UserNotFoundError ãŒç™ºç”Ÿã™ã‚‹
        """
        # Arrange
        mock_db = Mock()
        mock_db.query.return_value = None

        # Act & Assert
        with patch('src.user_profile.db', mock_db):
            with pytest.raises(UserNotFoundError, match="User with id 999 not found"):
                get_user_profile(999)

    @pytest.mark.parametrize("invalid_id", [0, -1, -100])
    def test_å¢ƒç•Œå€¤_user_idãŒ0ä»¥ä¸‹(self, invalid_id):
        """
        Given: user_idãŒ0ä»¥ä¸‹ã®å€¤
        When: get_user_profile()ã‚’å‘¼ã³å‡ºã™
        Then: ValueError ãŒç™ºç”Ÿã™ã‚‹
        """
        with pytest.raises(ValueError, match="Invalid user_id"):
            get_user_profile(invalid_id)

    def test_ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹_ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼(self):
        """
        Given: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æŽ¥ç¶šã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ
        When: get_user_profile()ã‚’å‘¼ã³å‡ºã™
        Then: DatabaseError ãŒä¼æ’­ã•ã‚Œã‚‹
        """
        mock_db = Mock()
        mock_db.query.side_effect = DatabaseError("Connection failed")

        with patch('src.user_profile.db', mock_db):
            with pytest.raises(DatabaseError):
                get_user_profile(123)
```

#### TDDï¼ˆãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼‰ã®é‡è¦æ€§

AI Factory ã§ã¯ã€QA Engineer ãŒå…ˆã«ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã€Coder ãŒãã®ãƒ†ã‚¹ãƒˆã‚’é€šéŽã™ã‚‹å®Ÿè£…ã‚’ä½œæˆã—ã¾ã™ï¼ˆTDDï¼‰ã€‚

**ãƒ¡ãƒªãƒƒãƒˆ**:
- ä»•æ§˜ãŒæ˜Žç¢ºã«ãªã‚‹ï¼ˆãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒä»•æ§˜æ›¸ã®å½¹å‰²ï¼‰
- ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³é˜²æ­¢
- ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ãŒå®‰å…¨ã«

#### ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚ºæ–¹æ³•

QA Engineer ã®å‹•ä½œã‚’èª¿æ•´ã™ã‚‹ã«ã¯ã€[.claude/agents/qa.md](../.claude/agents/qa.md) ã‚’ç·¨é›†ã—ã¾ã™ã€‚

**ä¾‹: ã‚«ãƒãƒ¬ãƒƒã‚¸é‡è¦–ã«ã™ã‚‹**

```markdown
---
name: QA Engineer
description: å“è³ªä¿è¨¼ã¨ãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ–ã®å°‚é–€å®¶ï¼ˆã‚«ãƒãƒ¬ãƒƒã‚¸é‡è¦–ï¼‰
---
ã‚ãªãŸã¯QAã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã™ã€‚

**å½¹å‰²**:
- è¨­è¨ˆæ›¸ã«åŸºã¥ãã€100%ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’ç›®æŒ‡ã—ãŸãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ä½œæˆ

**é‡è¦–äº‹é …**:
- ã™ã¹ã¦ã®åˆ†å²ã‚’ã‚«ãƒãƒ¼ã™ã‚‹ãƒ†ã‚¹ãƒˆ
- pytest-cov ã§ã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®šï¼ˆ90%ä»¥ä¸Šå¿…é ˆï¼‰
- ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ãƒ†ã‚¹ãƒˆã‚’ç©æ¥µçš„ã«ä½¿ç”¨

**ãƒ„ãƒ¼ãƒ«**:
- pytest, pytest-cov, pytest-mock
```

---

### 5. Coder

**å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«**: [.claude/agents/coder.md](../.claude/agents/coder.md)

#### å½¹å‰²ã¨è²¬ä»»

Coderï¼ˆ@Coderï¼‰ã¯ã€è¨­è¨ˆæ›¸ã«åŸºã¥ã„ã¦é«˜å“è³ªã§ä¿å®ˆæ€§ã®é«˜ã„ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè£…ã™ã‚‹ç†Ÿç·´Pythonã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã™ã€‚

**ä¸»ãªè²¬ä»»**:
- è¨­è¨ˆæ›¸ã‚’æº€ãŸã™å®Ÿè£…
- ãƒ†ã‚¹ãƒˆã‚’é€šéŽã™ã‚‹ã‚³ãƒ¼ãƒ‰ä½œæˆ
- ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã®éµå®ˆ
- æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã¨ã®æ•´åˆæ€§ç¶­æŒ
- é™çš„è§£æžã®é€šéŽ

#### åˆ¶ç´„ã¨è¦ä»¶

1. **[.claude/rules/python.md](../.claude/rules/python.md) ã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã‚’éµå®ˆ**
   - PEP 8 æº–æ‹ 
   - Google-style Docstringï¼ˆæ—¥æœ¬èªžï¼‰
   - ã‚¿ã‚¤ãƒ—ãƒ’ãƒ³ãƒˆå¿…é ˆ
   - å…¨publicé–¢æ•°ã«ãƒ†ã‚¹ãƒˆ

2. **æ—¢å­˜ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ï¼ˆ`src/`ï¼‰ã¨ã®æ•´åˆæ€§ã‚’ä¿ã¤**
   - æ—¢å­˜ã®è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¸è¥²
   - ã‚¤ãƒ³ãƒãƒ¼ãƒˆé †åºã®çµ±ä¸€
   - å‘½åè¦å‰‡ã®çµ±ä¸€

3. **å®Ÿè£…å¾Œã¯é™çš„è§£æžã‚’é€šã™**
   - ruffï¼ˆlinterï¼‰
   - mypyï¼ˆåž‹ãƒã‚§ãƒƒã‚¯ï¼‰

#### å…¥åŠ›ãƒ»å‡ºåŠ›

**å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«**:
- `docs/specs/feature-{id}.md` - è¨­è¨ˆæ›¸
- `tests/test_feature_{id}.py` - ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ï¼ˆå‚è€ƒï¼‰

**å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/*` - å®Ÿè£…ã‚³ãƒ¼ãƒ‰

#### ä½¿ç”¨ã•ã‚Œã‚‹ã‚³ãƒžãƒ³ãƒ‰

`/impl` ã‚³ãƒžãƒ³ãƒ‰ã§å‘¼ã³å‡ºã•ã‚Œã¾ã™:

```bash
# é€šå¸¸ã®å®Ÿè£…
claude -p /impl -- 42

# ãƒ†ã‚¹ãƒˆå¤±æ•—ã‚’ä¿®æ­£ï¼ˆmanager.pyãŒè‡ªå‹•ã§è¡Œã†ï¼‰
claude -p /impl -- 42 "Fix test failures based on output"
```

#### å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã®ã‚µãƒ³ãƒ—ãƒ«

```python
"""ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å–å¾—ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«"""
from datetime import datetime
from typing import Dict
from src.db import db  # æ—¢å­˜ã®DBæŽ¥ç¶šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«


class UserNotFoundError(Exception):
    """ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã®ä¾‹å¤–"""
    pass


def get_user_profile(user_id: int) -> Dict[str, any]:
    """
    ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’å–å¾—ã—ã¾ã™ã€‚

    Args:
        user_id: ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆæ­£ã®æ•´æ•°ï¼‰

    Returns:
        ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®è¾žæ›¸:
        - name (str): ãƒ¦ãƒ¼ã‚¶ãƒ¼å
        - email (str): ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
        - created_at (datetime): ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆæ—¥æ™‚

    Raises:
        UserNotFoundError: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå­˜åœ¨ã—ãªã„å ´åˆ
        ValueError: user_idãŒç„¡åŠ¹ãªå ´åˆï¼ˆ0ä»¥ä¸‹ï¼‰

    Examples:
        >>> get_user_profile(123)
        {'name': 'John Doe', 'email': 'john@example.com', ...}
    """
    # å…¥åŠ›æ¤œè¨¼
    if user_id <= 0:
        raise ValueError(f"Invalid user_id: {user_id}. Must be positive integer.")

    # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªï¼ˆæ—¢å­˜ã®db.pyãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ï¼‰
    result = db.query(
        "SELECT name, email, created_at FROM users WHERE id = ?",
        (user_id,)  # ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ã§SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³é˜²æ­¢
    )

    # çµæžœãƒã‚§ãƒƒã‚¯
    if result is None:
        raise UserNotFoundError(f"User with id {user_id} not found")

    # æˆ»ã‚Šå€¤ã®æ§‹ç¯‰
    return {
        "name": result["name"],
        "email": result["email"],
        "created_at": result["created_at"]
    }
```

#### manager.py ã§ã®ä½¿ç”¨

Phase 3ï¼ˆå®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚ºï¼‰ã§ä»¥ä¸‹ã®ãƒ•ãƒ­ãƒ¼ã§å®Ÿè¡Œã•ã‚Œã¾ã™ï¼š

```
1. /impl ã‚’å®Ÿè¡Œ
2. uv run pytest ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
3. å¤±æ•—ã—ãŸå ´åˆ: /impl ã‚’å†å®Ÿè¡Œï¼ˆã€ŒFix test failures...ã€æŒ‡ç¤ºä»˜ãï¼‰
4. å†å®Ÿè¡Œå¾Œã‚‚ãƒ†ã‚¹ãƒˆå¤±æ•—: ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
```

è‡ªå‹•ä¿®æ­£ã¯1å›žã®ã¿ï¼ˆç„¡é™ãƒ«ãƒ¼ãƒ—é˜²æ­¢ï¼‰ã€‚

#### ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

1. **ã‚¿ã‚¤ãƒ—ãƒ’ãƒ³ãƒˆå¿…é ˆ**
   ```python
   # Good
   def get_user_profile(user_id: int) -> Dict[str, any]:
       ...

   # Bad
   def get_user_profile(user_id):
       ...
   ```

2. **Docstringå¿…é ˆï¼ˆGoogle-styleã€æ—¥æœ¬èªžï¼‰**
   ```python
   def get_user_profile(user_id: int) -> Dict[str, any]:
       """
       ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’å–å¾—ã—ã¾ã™ã€‚

       Args:
           user_id: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID

       Returns:
           ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®è¾žæ›¸

       Raises:
           UserNotFoundError: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå­˜åœ¨ã—ãªã„å ´åˆ
       """
   ```

3. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¯å…·ä½“çš„ã«**
   ```python
   # Good
   except DatabaseError as e:
       logger.error(f"Database error: {e}")
       raise

   # Bad
   except:
       pass
   ```

#### ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚ºæ–¹æ³•

Coderã®å‹•ä½œã‚’èª¿æ•´ã™ã‚‹ã«ã¯ã€[.claude/agents/coder.md](../.claude/agents/coder.md) ã‚’ç·¨é›†ã—ã¾ã™ã€‚

**ä¾‹: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹é‡è¦–ã«ã™ã‚‹**

```markdown
---
name: Coder
description: å®Ÿè£…æ‹…å½“ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢
---
ã‚ãªãŸã¯ç†Ÿç·´ã—ãŸPythonã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å…¼ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã™ã€‚

**å½¹å‰²**:
- è¨­è¨ˆæ›¸ã«åŸºã¥ãã€é«˜é€Ÿã§åŠ¹çŽ‡çš„ãªã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè£…

**åˆ¶ç´„**:
- .claude/rules/python.md ã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã‚’éµå®ˆ
- Big-Oè¨˜æ³•ã§ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®è¨ˆç®—é‡ã‚’æ˜Žè¨˜
- ãƒ™ãƒ³ãƒãƒžãƒ¼ã‚¯ã‚³ãƒ¼ãƒ‰ã‚’å«ã‚ã‚‹

**æŒ‡é‡**:
- ãƒªã‚¹ãƒˆå†…åŒ…è¡¨è¨˜ã‚’ç©æ¥µçš„ã«ä½¿ç”¨
- ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã§å¤§é‡ãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆfunctools.lru_cacheï¼‰ã‚’æ´»ç”¨
```

---

### 6. Librarian

**å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«**: [.claude/agents/librarian.md](../.claude/agents/librarian.md)

#### å½¹å‰²ã¨è²¬ä»»

Librarianï¼ˆ@Librarianï¼‰ã¯ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¨è¨­è¨ˆæ›¸ã®å¤‰æ›´ã‚’ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«åæ˜ ã™ã‚‹å°‚é–€å®¶ã§ã™ã€‚

**ä¸»ãªè²¬ä»»**:
- ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ›´æ–°
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®é™³è…åŒ–é˜²æ­¢
- Single Source of Truthï¼ˆå”¯ä¸€ã®ä¿¡é ¼ã§ãã‚‹æƒ…å ±æºï¼‰ã®ç¶­æŒ
- ã‚³ãƒ¼ãƒ‰ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®åŒæœŸ

#### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°å†…å®¹

LibrarianãŒæ›´æ–°ã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:

- **ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: ä¸»è¦ãªã‚¯ãƒ©ã‚¹ã¨è²¬ä»»
- **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆ**: ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã¨ä¾å­˜é–¢ä¿‚
- **ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼**: ãƒ‡ãƒ¼ã‚¿ã®æµã‚Œã¨å¤‰æ›
- **APIä¸€è¦§**: å…¬é–‹é–¢æ•°ãƒ»ã‚¯ãƒ©ã‚¹ã®ãƒªã‚¹ãƒˆ

#### å…¥åŠ›ãƒ»å‡ºåŠ›

**å…¥åŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª**:
- `src/` - ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å…¨ä½“
- `docs/specs/` - è¨­è¨ˆæ›¸ï¼ˆå‚è€ƒï¼‰

**å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«**:
- `docs/architecture/current_system.md` - ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

#### ä½¿ç”¨ã•ã‚Œã‚‹ã‚³ãƒžãƒ³ãƒ‰

`/sync` ã‚³ãƒžãƒ³ãƒ‰ã§å‘¼ã³å‡ºã•ã‚Œã¾ã™:

```bash
claude -p /sync
```

**æ³¨æ„**: `/sync` ã‚³ãƒžãƒ³ãƒ‰ã¯Issue IDã‚’å¿…è¦ã¨ã—ã¾ã›ã‚“ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ãŒå¯¾è±¡ï¼‰ã€‚

#### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚µãƒ³ãƒ—ãƒ«

```markdown
# ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

æœ€çµ‚æ›´æ–°: 2025-01-20 12:34:56

## ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆ

```
src/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ db.py                    # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æŽ¥ç¶š
â”œâ”€â”€ user_profile.py          # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å–å¾—ï¼ˆNEWï¼‰
â””â”€â”€ utils/
    â”œâ”€â”€ __init__.py
    â””â”€â”€ validators.py        # å…¥åŠ›æ¤œè¨¼
```

## ä¸»è¦ãªã‚¯ãƒ©ã‚¹ã¨é–¢æ•°

### user_profile.py

#### `UserNotFoundError`
**ç¨®é¡ž**: ä¾‹å¤–ã‚¯ãƒ©ã‚¹
**èª¬æ˜Ž**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã«ç™ºç”Ÿ

#### `get_user_profile(user_id: int) -> Dict[str, any]`
**èª¬æ˜Ž**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’å–å¾—
**å¼•æ•°**:
- `user_id`: ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆæ­£ã®æ•´æ•°ï¼‰

**æˆ»ã‚Šå€¤**: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®è¾žæ›¸

**ä¾‹å¤–**:
- `UserNotFoundError`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå­˜åœ¨ã—ãªã„
- `ValueError`: user_idãŒç„¡åŠ¹ï¼ˆ0ä»¥ä¸‹ï¼‰

**ä¾å­˜**:
- `src.db.db`: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æŽ¥ç¶šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
user_id (int)
   â†“
get_user_profile()
   â†“
db.query() â† ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
   â†“
user_data (dict)
```

## APIä¸€è¦§

| é–¢æ•° | ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« | å…¬é–‹ | èª¬æ˜Ž |
|------|----------|------|------|
| `get_user_profile` | user_profile | âœ… | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å–å¾— |
| `connect_db` | db | âœ… | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æŽ¥ç¶š |
| `validate_user_id` | utils.validators | âŒ | å†…éƒ¨: user_idæ¤œè¨¼ |
```

#### manager.py ã§ã®ä½¿ç”¨

Phase 4ï¼ˆæœ€çµ‚ãƒ•ã‚§ãƒ¼ã‚ºï¼‰ã§å®Ÿè¡Œã•ã‚Œã€PRä½œæˆå‰ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æœ€æ–°çŠ¶æ…‹ã«åŒæœŸã—ã¾ã™ã€‚

#### ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚ºæ–¹æ³•

Librarianã®å‹•ä½œã‚’èª¿æ•´ã™ã‚‹ã«ã¯ã€[.claude/agents/librarian.md](../.claude/agents/librarian.md) ã‚’ç·¨é›†ã—ã¾ã™ã€‚

**ä¾‹: ã‚ˆã‚Šè©³ç´°ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç”Ÿæˆã™ã‚‹**

```markdown
---
name: Librarian
description: è©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç®¡ç†è€…
---
ã‚ãªãŸã¯è©³ç´°å¿—å‘ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç®¡ç†è€…ã§ã™ã€‚

**å½¹å‰²**:
- ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è©³ç´°ã«åˆ†æžã—ã€åŒ…æ‹¬çš„ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ä½œæˆ
- UMLå›³ï¼ˆã‚¯ãƒ©ã‚¹å›³ãƒ»ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ï¼‰ã‚’å«ã‚ã‚‹
- è¨­è¨ˆæ±ºå®šã®èƒŒæ™¯ï¼ˆADR: Architecture Decision Recordï¼‰ã‚‚è¨˜éŒ²

**å‡ºåŠ›å½¢å¼**:
- Markdown + Mermaidå›³
- å„é–¢æ•°ã«ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ä»˜ã
```

---

## ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚º

### æ–°ã—ã„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®è¿½åŠ 

æ–°ã—ã„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’è¿½åŠ ã™ã‚‹æ‰‹é †:

#### 1. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ

```bash
cat > .claude/agents/performance_engineer.md <<EOF
---
name: Performance Engineer
description: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹æœ€é©åŒ–ã®å°‚é–€å®¶
---
ã‚ãªãŸã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã™ã€‚

**å½¹å‰²**:
- ã‚³ãƒ¼ãƒ‰ã®ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã‚’æ¤œå‡º
- æœ€é©åŒ–ææ¡ˆã‚’è¡Œã†
- ãƒ™ãƒ³ãƒãƒžãƒ¼ã‚¯ã‚’å®Ÿè¡Œ

**ãƒ„ãƒ¼ãƒ«**:
- cProfileï¼ˆãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ï¼‰
- pytest-benchmarkï¼ˆãƒ™ãƒ³ãƒãƒžãƒ¼ã‚¯ï¼‰
- memory_profilerï¼ˆãƒ¡ãƒ¢ãƒªåˆ†æžï¼‰
EOF
```

#### 2. ã‚³ãƒžãƒ³ãƒ‰å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ

```bash
cat > .claude/commands/optimize.md <<EOF
---
description: Optimize performance
arguments:
  - name: id
---
@Performance_Engineer ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹æœ€é©åŒ–
å…¥åŠ›: src/
å‡ºåŠ›: docs/performance/optimization-{id}.md

**æŒ‡ç¤º**:
å®Ÿè£…ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã‚’æ¤œå‡ºã—ã€æœ€é©åŒ–æ¡ˆã‚’æç¤ºã—ã¦ãã ã•ã„ã€‚

**åˆ†æžé …ç›®**:
1. å®Ÿè¡Œæ™‚é–“ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ï¼ˆcProfileï¼‰
2. ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡åˆ†æž
3. ãƒ“ãƒƒã‚°Oè¨˜æ³•ã§ã®è¨ˆç®—é‡è©•ä¾¡
4. æœ€é©åŒ–å‰å¾Œã®ãƒ™ãƒ³ãƒãƒžãƒ¼ã‚¯æ¯”è¼ƒ
EOF
```

#### 3. ä½¿ç”¨æ–¹æ³•

```bash
cd .claude/worktrees/task-42
claude -p /optimize -- 42
```

### æ—¢å­˜ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®èª¿æ•´

æ—¢å­˜ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`.claude/agents/*.md`ï¼‰ã‚’ç›´æŽ¥ç·¨é›†ã™ã‚‹ã“ã¨ã§ã€å‹•ä½œã‚’èª¿æ•´ã§ãã¾ã™ã€‚

#### ä¾‹: Criticã‚’ã‚ˆã‚Šå¯›å®¹ã«ã™ã‚‹

[.claude/agents/critic.md](../.claude/agents/critic.md) ã‚’ç·¨é›†:

```markdown
---
name: Critic
description: ãƒãƒ©ãƒ³ã‚¹åž‹ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼
---
ã‚ãªãŸã¯ãƒãƒ©ãƒ³ã‚¹æ„Ÿè¦šã«å„ªã‚ŒãŸãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼ã§ã™ã€‚

**å½¹å‰²**:
- è‡´å‘½çš„ãªæ¬ é™¥ã®ã¿ã‚’æŒ‡æ‘˜
- å®Œç’§ã‚’æ±‚ã‚ã™ãŽãšã€å®Ÿç”¨æ€§ã‚’é‡è¦–

**åˆ¤å®šåŸºæº–**:
- é‡å¤§ãªãƒã‚°ã‚„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ãŒãªã„ã‹
- è»½å¾®ãªå•é¡Œã¯æ”¹å–„ææ¡ˆã¨ã—ã¦æç¤º

**å‡ºåŠ›å½¢å¼**:
- è‡´å‘½çš„ãªå•é¡Œã‚ã‚Š â†’ "REQUEST_CHANGES"
- ãã‚Œä»¥å¤– â†’ "APPROVED" + æ”¹å–„ææ¡ˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
```

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

- [COMMANDS.md](COMMANDS.md) - å„ã‚³ãƒžãƒ³ãƒ‰ã®è©³ç´°ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’ç¢ºèª
- [WORKFLOW.md](WORKFLOW.md) - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã®å”èª¿å‹•ä½œã‚’ç†è§£
- [USAGE.md](USAGE.md) - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æ‰‹å‹•ã§å®Ÿè¡Œã™ã‚‹æ–¹æ³•

---

### 7. Tech Lead

**å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«**: [.claude/agents/tech_lead.md](../.claude/agents/tech_lead.md)

#### å½¹å‰²ã¨è²¬ä»»

Tech Leadï¼ˆ@Tech_Leadï¼‰ã¯ã€å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã®å“è³ªã‚’åŽ³æ ¼ã«æ¤œè¨¼ã™ã‚‹ã‚³ãƒ¼ãƒ‰ç›£æŸ»ã®å°‚é–€å®¶ã§ã™ã€‚

**ä¸»ãªè²¬ä»»**:
- ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£é•åã®ãƒã‚§ãƒƒã‚¯
- é™çš„è§£æžï¼ˆruff, mypyï¼‰ã®å®Ÿè¡Œ
- å¤‰ç•°ãƒ†ã‚¹ãƒˆï¼ˆmutmutï¼‰ã«ã‚ˆã‚‹ãƒ†ã‚¹ãƒˆå“è³ªæ¤œè¨¼
- åˆæ ¼/ä¸åˆæ ¼ã®æ˜Žç¢ºãªåˆ¤å®š

#### åˆ¤å®šåŸºæº–

- **mutmutã‚¹ã‚³ã‚¢80%æœªæº€**: å¿…ãšReject
- **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£é•å**: Reject
- **åž‹ã‚¨ãƒ©ãƒ¼ï¼ˆmypyï¼‰**: Reject
- **Ruffã‚¨ãƒ©ãƒ¼**: Reject

#### å‡ºåŠ›å½¢å¼

##### Approvedï¼ˆæ‰¿èªï¼‰

```
âœ… [Approved] å…¨ãƒã‚§ãƒƒã‚¯é€šéŽ
- ruff: OK
- mypy: OK
- mutmut: 85% (17/20 killed)
```

##### Rejectï¼ˆå´ä¸‹ï¼‰

```
ðŸš¨ [Reject] ãƒ†ã‚¹ãƒˆå“è³ªä¸è¶³
- mutmut: 65% (13/20 killed)
- æ”¹å–„ç­–: test_get_user_profile_not_found ã®ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ã¦ãã ã•ã„
```

#### ä½¿ç”¨ã•ã‚Œã‚‹ã‚³ãƒžãƒ³ãƒ‰

`/review` ã‚³ãƒžãƒ³ãƒ‰ã§å‘¼ã³å‡ºã•ã‚Œã¾ã™:

```bash
claude -p /review -- 42
```

#### ä½œæ¥­ãƒ¡ãƒ¢è¨˜éŒ²

ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­ã«å¾—ãŸå­¦ã³ã‚’ `.claude/factory/memos/issue-{id}-tech_lead.md` ã«è¨˜éŒ²ã—ã¾ã™ã€‚

---

### 8. Validator

**å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«**: [.claude/agents/validator.md](../.claude/agents/validator.md)

#### å½¹å‰²ã¨è²¬ä»»

Validatorï¼ˆ@Validatorï¼‰ã¯ã€PRãŒmainãƒ–ãƒ©ãƒ³ãƒã«ãƒžãƒ¼ã‚¸ã•ã‚ŒãŸå¾Œã€ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã“ã¨ã‚’æ¤œè¨¼ã™ã‚‹çµ±åˆæ¤œè¨¼ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã™ã€‚

**ä¸»ãªè²¬ä»»**:
- ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆpytestï¼‰
- é™çš„è§£æžï¼ˆruff, mypyï¼‰
- çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•ç¢ºèªï¼‰
- å›žå¸°ãƒ†ã‚¹ãƒˆï¼ˆæ—¢å­˜æ©Ÿèƒ½ãŒå£Šã‚Œã¦ã„ãªã„ã‹ï¼‰

#### åˆ¤å®šåŸºæº–

- **pytest**: å…¨ãƒ†ã‚¹ãƒˆãŒé€šéŽã™ã‚‹ã“ã¨
- **ruff**: ã‚¨ãƒ©ãƒ¼ãŒãªã„ã“ã¨
- **mypy**: åž‹ã‚¨ãƒ©ãƒ¼ãŒãªã„ã“ã¨
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒæˆåŠŸã™ã‚‹ã“ã¨

#### å‡ºåŠ›å½¢å¼

##### PASSEDï¼ˆæ¤œè¨¼æˆåŠŸï¼‰

```
âœ… [PASSED] ãƒžãƒ¼ã‚¸å¾Œæ¤œè¨¼å®Œäº†
- pytest: OK (N tests passed)
- ruff: OK
- mypy: OK
- çµ±åˆãƒ†ã‚¹ãƒˆ: OK
```

##### FAILEDï¼ˆæ¤œè¨¼å¤±æ•—ï¼‰

```
âŒ [FAILED] ãƒžãƒ¼ã‚¸å¾Œæ¤œè¨¼å¤±æ•—

### å¤±æ•—é …ç›®
- [å¤±æ•—ã—ãŸãƒã‚§ãƒƒã‚¯å]

### ã‚¨ãƒ©ãƒ¼è©³ç´°
[ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸]

### æŽ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
- [ä¿®æ­£ã®ãƒ’ãƒ³ãƒˆ]
```

#### ä½¿ç”¨ã•ã‚Œã‚‹ã‚³ãƒžãƒ³ãƒ‰

`/merge` ã‚³ãƒžãƒ³ãƒ‰ã®ãƒ•ã‚§ãƒ¼ã‚º6ã§å‘¼ã³å‡ºã•ã‚Œã¾ã™:

```bash
claude -p /merge -- 123
```

#### æ¤œè¨¼å¤±æ•—æ™‚ã®å¯¾å¿œ

æ¤œè¨¼ãŒå¤±æ•—ã—ãŸå ´åˆã€è‡ªå‹•çš„ã«ãƒã‚°Issueã‚’ä½œæˆã—ã¾ã™ï¼š
- ãƒ©ãƒ™ãƒ«: `bug`, `todo`
- å…ƒã®PR/Issueã¸ã®å‚ç…§ã‚’å«ã‚€
- ã‚¨ãƒ©ãƒ¼ã®è©³ç´°ã¨å†ç¾æ‰‹é †ã‚’è¨˜è¼‰

ã“ã®Issueã¯é€šå¸¸ã® `/run` ãƒ•ãƒ­ãƒ¼ã§ä¿®æ­£ã•ã‚Œã¾ã™ã€‚

---

### 9. Scrum Master

**å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«**: [.claude/agents/scrum_master.md](../.claude/agents/scrum_master.md)

#### å½¹å‰²ã¨è²¬ä»»

Scrum Masterï¼ˆ@Scrum_Masterï¼‰ã¯ã€å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ä½œæ¥­ãƒ¡ãƒ¢ã‚’åŽé›†ã—ã€æ±Žç”¨çš„ãªå­¦ã³ã‚’ `claude.md` ã«è“„ç©ã™ã‚‹çŸ¥è­˜ç®¡ç†ã®å°‚é–€å®¶ã§ã™ã€‚

**ä¸»ãªè²¬ä»»**:
- ä½œæ¥­ãƒ¡ãƒ¢ã®åŽé›†ã¨åˆ†æž
- Issueå›ºæœ‰ã®å†…å®¹ã®é™¤å¤–
- æ±Žç”¨çš„ãªå­¦ã³ã®æŠ½å‡º
- é©åˆ‡ãª `claude.md` ã¸ã®è¿½è¨˜

#### æ‰‹é †

1. **ä½œæ¥­ãƒ¡ãƒ¢åŽé›†**: `.claude/factory/memos/issue-{id}-*.md` ã‹ã‚‰å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒ¡ãƒ¢ã‚’èª­ã¿è¾¼ã¿
2. **åˆ†æž**: Issueå›ºæœ‰ã®å†…å®¹ã‚’é™¤å¤–ã—ã€æ±Žç”¨çš„ãªå­¦ã³ã‚’æŠ½å‡º
3. **å½±éŸ¿ç¯„å›²åˆ¤æ–­**: å­¦ã³ã®é©ç”¨ç¯„å›²ã«å¿œã˜ã¦é©åˆ‡ãª `claude.md` ã‚’é¸æŠž
4. **è¿½è¨˜**: é¸æŠžã—ãŸ `claude.md` ã«å­¦ã³ã‚’è¿½åŠ 

#### åˆ¤æ–­åŸºæº–

- **è¿½åŠ ã—ãªã„**: ä»Šå›žã®Issueå›ºæœ‰ã®å†…å®¹ï¼ˆä¾‹: ã€ŒIssue #123ã®ãƒã‚°ã‚’ä¿®æ­£ã—ãŸã€ï¼‰
- **è¿½åŠ ã™ã‚‹**: æ¬¡å›žä»¥é™ã‚‚å½¹ç«‹ã¤æ±Žç”¨çš„ãªçŸ¥è­˜ï¼ˆä¾‹: ã€Œãƒ©ã‚¤ãƒ–ãƒ©ãƒªXã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³Yä»¥é™ã§ã¯ã€‡ã€‡ã«æ³¨æ„ã€ï¼‰

#### ä½¿ç”¨ã•ã‚Œã‚‹ã‚³ãƒžãƒ³ãƒ‰

`/kaizen` ã‚³ãƒžãƒ³ãƒ‰ã§å‘¼ã³å‡ºã•ã‚Œã¾ã™:

```bash
claude -p /kaizen -- 42
```

#### å‡ºåŠ›ä¾‹

```
å­¦ã³ã‚’ claude.md ã«è¿½åŠ ã—ã¾ã—ãŸ:
- è¿½åŠ å…ˆ: src/utils/claude.md
- å†…å®¹: pydantic v2 ã§ã¯ Field(default_factory=list) ã®æ›¸ãæ–¹ãŒå¤‰æ›´ã•ã‚ŒãŸ
```

---

**AI Factory v2.7 ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¬ã‚¤ãƒ‰** - 9ã¤ã®å°‚é–€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å®Œå…¨ã‚¬ã‚¤ãƒ‰
