# Claude Code ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰ãƒ»ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚¬ã‚¤ãƒ‰

## ç›®æ¬¡

1. [ç¾çŠ¶ã®å•é¡Œç‚¹](#ç¾çŠ¶ã®å•é¡Œç‚¹)
2. [Claude Code ã®æ­£ã—ã„ç†è§£](#claude-code-ã®æ­£ã—ã„ç†è§£)
3. [ä¿®æ­£æ¡ˆ: auto.md](#ä¿®æ­£æ¡ˆ-automd)
4. [ä¿®æ­£æ¡ˆ: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©](#ä¿®æ­£æ¡ˆ-ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©)
5. [ä¿®æ­£æ¡ˆ: ãã®ä»–ã®ã‚³ãƒãƒ³ãƒ‰](#ä¿®æ­£æ¡ˆ-ãã®ä»–ã®ã‚³ãƒãƒ³ãƒ‰)
6. [ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹](#ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹)

---

## ç¾çŠ¶ã®å•é¡Œç‚¹

### å•é¡Œ1: `claude -p` ã§ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã‚’å‘¼ã‚“ã§ã„ã‚‹ï¼ˆè‡´å‘½çš„ï¼‰

**è©²å½“ç®‡æ‰€**: `auto.md`

```bash
# âŒ ç¾åœ¨ã®å®Ÿè£…
claude -p "/run {issue_id}"
claude -p "/merge"
```

**ç™ºç”Ÿã™ã‚‹å•é¡Œ**:

| ç—‡çŠ¶ | åŸå›  |
|------|------|
| `No stdout output available` | headless mode ã§ã®å‡ºåŠ›ã‚­ãƒ£ãƒ—ãƒãƒ£å•é¡Œ |
| `sleep 120` ã§ãƒãƒ¼ãƒªãƒ³ã‚° | å®Œäº†æ¤œçŸ¥ãŒã§ããªã„ |
| ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå‹•ã‹ãªã„ | `-p` å†…ã§ã¯ Task tool ãŒåˆ¶é™ã•ã‚Œã‚‹ |
| äºˆæœŸã›ã¬çŠ¶æ…‹ | ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒå…±æœ‰ã•ã‚Œãªã„ |

**æŠ€è¡“çš„èƒŒæ™¯**:

```
[è¦ª] claude (ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–)
  â””â”€ Bash: claude -p "/run 27"  â† åˆ¥ãƒ—ãƒ­ã‚»ã‚¹èµ·å‹•
       â””â”€ [å­] claude (headless)
            â””â”€ Task tool â†’ ä½¿ãˆãªã„ï¼ˆã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œã‚Œãªã„ï¼‰
```

---

### å•é¡Œ2: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©ãŒä¸å®Œå…¨

**è©²å½“ç®‡æ‰€**: `agents/*.md`

```yaml
# âŒ ç¾åœ¨
---
name: Coder
description: å®Ÿè£…æ‹…å½“ã®ã‚·ãƒ‹ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢
---
```

**å•é¡Œç‚¹**:
- `tools` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒãªã„ â†’ å…¨ãƒ„ãƒ¼ãƒ«ãŒè¨±å¯ã•ã‚Œã‚‹
- `description` ãŒæ›–æ˜§ â†’ Claude ãŒè‡ªå‹•é¸æŠã—ã«ãã„

---

### å•é¡Œ3: ã‚³ãƒãƒ³ãƒ‰ãŒåˆ¥ã‚³ãƒãƒ³ãƒ‰ã‚’å‘¼ã¶è¤‡é›‘ãªä¾å­˜é–¢ä¿‚

```
/auto â†’ /run â†’ /test, /impl, /review, /kaizen â†’ å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
     â†’ /merge â†’ /sync â†’ @Librarian
```

**å•é¡Œç‚¹**:
- ãƒ‡ãƒãƒƒã‚°ãŒå›°é›£
- ã‚¨ãƒ©ãƒ¼æ™‚ã®åŸå› ç‰¹å®šãŒé›£ã—ã„
- ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®æµã‚ŒãŒè¿½ã„ã«ãã„

---

## Claude Code ã®æ­£ã—ã„ç†è§£

### ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆTask toolï¼‰ã®ä»•çµ„ã¿

```
[ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ]
    â”‚
    â”œâ”€â”€ Task("ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†æã—ã¦") â†’ [ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ1] â†’ çµæœã‚’è¿”ã™
    â”‚                                    â””â”€â”€ ç‹¬è‡ªã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
    â”‚                                    â””â”€â”€ Task tool ã¯ä½¿ãˆãªã„ âŒ
    â”‚
    â””â”€â”€ Task("ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦") â†’ [ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ2] â†’ çµæœã‚’è¿”ã™
```

**é‡è¦ãªåˆ¶ç´„**:
- ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯**ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œã‚Œãªã„**ï¼ˆ1éšå±¤ã®ã¿ï¼‰
- å„ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯**ç‹¬ç«‹ã—ãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ**ã‚’æŒã¤
- æœ€å¤§**10ä¸¦åˆ—**ã¾ã§

---

### ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã®å‘¼ã³å‡ºã—æ–¹æ³•

| æ–¹æ³• | ç”¨é€” | åˆ¶ç´„ |
|------|------|------|
| `/command` | ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ– | åŒä¸€ã‚»ãƒƒã‚·ãƒ§ãƒ³å†… |
| `claude -p "ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ"` | è‡ªå‹•åŒ–ãƒ»CI | ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã¯éæ¨å¥¨ |
| Task tool | ä¸¦åˆ—å‡¦ç† | ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‹ã‚‰å‘¼ã¹ãªã„ |

---

### ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆç®¡ç†

| æ–¹æ³• | èª¬æ˜ |
|------|------|
| `/compact` | ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è¦ç´„ã—ã¦åœ§ç¸® |
| `/clear` | ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’å®Œå…¨ã«ã‚¯ãƒªã‚¢ |
| æ–°ã‚»ãƒƒã‚·ãƒ§ãƒ³ | `claude` ã‚’å†èµ·å‹• |

---

## ä¿®æ­£æ¡ˆ: auto.md

### æ–¹å¼ã®é¸æŠ

| æ–¹å¼ | ãƒ¡ãƒªãƒƒãƒˆ | ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ |
|------|----------|------------|
| **A: ç›´æ¥å‘¼ã³å‡ºã— + /compact** | ã‚·ãƒ³ãƒ—ãƒ«ã€ãƒ‡ãƒãƒƒã‚°å®¹æ˜“ | é•·æ™‚é–“å®Ÿè¡Œã§ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆè‚¥å¤§ |
| **B: headless + ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ** | ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆåˆ†é›¢ | ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ä½¿ç”¨ä¸å¯ |
| **C: å¤–éƒ¨ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼** | å®Œå…¨åˆ†é›¢ã€ä¸¦åˆ—å¯ | å®Ÿè£…ãŒè¤‡é›‘ |

**æ¨å¥¨: æ–¹å¼Aï¼ˆå°‘é‡Issueï¼‰ã¾ãŸã¯æ–¹å¼Cï¼ˆå¤§é‡Issueï¼‰**

---

### ä¿®æ­£æ¡ˆA: ç›´æ¥å‘¼ã³å‡ºã— + /compact

```markdown
---
description: Auto-process all todo issues
---

**TODO Issueã®è‡ªå‹•é€£ç¶šå‡¦ç†**

`label:todo` ã‹ã¤ `no:assignee` ã®Issueã‚’è‹¥ã„ç•ªå·é †ã«å–å¾—ã—ã€ã™ã¹ã¦å‡¦ç†ã—ã¾ã™ã€‚

## é‡è¦: å®Œå…¨è‡ªå‹•å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ï¼ˆç¢ºèªãªã—ï¼‰

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ **å®Œå…¨è‡ªå‹•ã§å®Ÿè¡Œ** ã—ã¾ã™ã€‚**é€”ä¸­ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç¢ºèªã‚’æ±‚ã‚ãªã„ã€‚**

---

## å‡¦ç†ãƒ•ãƒ­ãƒ¼

```
while true:
    1. gh issue list ã§å¯¾è±¡Issueæ¤œç´¢
    2. è¦‹ã¤ã‹ã‚‰ãªã‘ã‚Œã°çµ‚äº†
    3. æ¥½è¦³çš„ãƒ­ãƒƒã‚¯ã§ã‚¢ã‚µã‚¤ãƒ³
    4. /run {issue_id} ã‚’ç›´æ¥å®Ÿè¡Œï¼ˆåŒä¸€ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰
    5. /compact ã§ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆåœ§ç¸®
    6. /merge ã‚’ç›´æ¥å®Ÿè¡Œï¼ˆåŒä¸€ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰
    7. /compact ã§ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆåœ§ç¸®
    8. æ¬¡ã®Issueã¸
```

---

## ã‚¹ãƒ†ãƒƒãƒ—1: å¯¾è±¡Issueæ¤œç´¢

```bash
gh issue list --search "label:todo no:assignee state:open sort:created-asc" --limit 1 --json number --jq ".[0].number"
```

---

## ã‚¹ãƒ†ãƒƒãƒ—2: çµ‚äº†åˆ¤å®š

IssueãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆï¼ˆç©ºæ–‡å­—åˆ—ãŒè¿”ã‚‹å ´åˆï¼‰ã€**ãƒ«ãƒ¼ãƒ—ã‚’çµ‚äº†ã—ã¦æœ€çµ‚å ±å‘Šã¸**ã€‚

---

## ã‚¹ãƒ†ãƒƒãƒ—3: æ¥½è¦³çš„ãƒ­ãƒƒã‚¯ï¼ˆç«¶åˆé˜²æ­¢ï¼‰

```bash
# 1. ã‚¢ã‚µã‚¤ãƒ³å‰ã«ç¢ºèª
ASSIGNEES=$(gh issue view {id} --json assignees --jq ".assignees | length")
# â†’ "0" ã§ãªã‘ã‚Œã°ã‚¹ã‚­ãƒƒãƒ—ã—ã¦æ¬¡ã®Issueã¸

# 2. è‡ªåˆ†ã‚’ã‚¢ã‚µã‚¤ãƒ³
gh issue edit {id} --add-assignee @me

# 3. 2ç§’å¾…æ©Ÿå¾Œã«å†ç¢ºèª
sleep 2
ASSIGNEES=$(gh issue view {id} --json assignees --jq ".assignees | length")
# â†’ "1" ã§ãªã‘ã‚Œã°ç«¶åˆç™ºç”Ÿã€ã‚¢ã‚µã‚¤ãƒ³å–ã‚Šæ¶ˆã—ã¦ã‚¹ã‚­ãƒƒãƒ—
```

---

## ã‚¹ãƒ†ãƒƒãƒ—4: /run å®Ÿè¡Œï¼ˆç›´æ¥å‘¼ã³å‡ºã—ï¼‰

ã‚¢ã‚µã‚¤ãƒ³æˆåŠŸå¾Œã€**åŒä¸€ã‚»ãƒƒã‚·ãƒ§ãƒ³å†…ã§** `/run` ã‚’å®Ÿè¡Œ:

```
/run {issue_id}
```

**æ³¨æ„**: `claude -p "/run"` ã¯ä½¿ã‚ãªã„ã€‚

---

## ã‚¹ãƒ†ãƒƒãƒ—5: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆåœ§ç¸®

`/run` å®Œäº†å¾Œã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’åœ§ç¸®ã—ã¦ãƒ¡ãƒ¢ãƒªå•é¡Œã‚’é˜²æ­¢:

```
/compact
```

---

## ã‚¹ãƒ†ãƒƒãƒ—6: /merge å®Ÿè¡Œï¼ˆ/runæˆåŠŸæ™‚ã®ã¿ï¼‰

`/run` ãŒæˆåŠŸã—ãŸå ´åˆã€åŒä¸€ã‚»ãƒƒã‚·ãƒ§ãƒ³å†…ã§ `/merge` ã‚’å®Ÿè¡Œ:

```
/merge
```

---

## ã‚¹ãƒ†ãƒƒãƒ—7: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆåœ§ç¸®

```
/compact
```

---

## ã‚¹ãƒ†ãƒƒãƒ—8: æ¬¡ã®Issueã¸

ã‚¹ãƒ†ãƒƒãƒ—1ã«æˆ»ã£ã¦æ¬¡ã®Issueã‚’æ¤œç´¢ã€‚

---

## æœ€çµ‚å ±å‘Š

å…¨Issueå‡¦ç†å®Œäº†å¾Œã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å ±å‘Š:

1. **å‡¦ç†ã—ãŸIssueæ•°**: Nä»¶
2. **æˆåŠŸã—ãŸIssue**: ä¸€è¦§
3. **å¤±æ•—ã—ãŸIssue**: ä¸€è¦§
```

---

### ä¿®æ­£æ¡ˆC: å¤–éƒ¨ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼ˆå¤§é‡Issueå‘ã‘ï¼‰

ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§è¤‡æ•°ã® `claude -p` ã‚’é †æ¬¡å®Ÿè¡Œ:

**`.claude/factory/auto_runner.sh`**:

```bash
#!/bin/bash
# å¤–éƒ¨ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼: å„Issueã‚’ç‹¬ç«‹ã—ãŸClaudeã‚»ãƒƒã‚·ãƒ§ãƒ³ã§å‡¦ç†

set -e

echo "ğŸ­ è‡ªå‹•å‡¦ç†é–‹å§‹"

while true; do
    # å¯¾è±¡Issueæ¤œç´¢
    ISSUE_ID=$(gh issue list \
        --search "label:todo no:assignee state:open sort:created-asc" \
        --limit 1 --json number --jq ".[0].number")
    
    if [ -z "$ISSUE_ID" ] || [ "$ISSUE_ID" = "null" ]; then
        echo "âœ… å…¨Issueå‡¦ç†å®Œäº†"
        break
    fi
    
    echo "ğŸ“‹ Processing Issue #$ISSUE_ID"
    
    # æ¥½è¦³çš„ãƒ­ãƒƒã‚¯
    ASSIGNEES=$(gh issue view "$ISSUE_ID" --json assignees --jq ".assignees | length")
    if [ "$ASSIGNEES" != "0" ]; then
        echo "â­ï¸ Issue #$ISSUE_ID ã¯ä»–ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ãŒå‡¦ç†ä¸­ã€ã‚¹ã‚­ãƒƒãƒ—"
        continue
    fi
    
    gh issue edit "$ISSUE_ID" --add-assignee @me
    sleep 2
    
    ASSIGNEES=$(gh issue view "$ISSUE_ID" --json assignees --jq ".assignees | length")
    if [ "$ASSIGNEES" != "1" ]; then
        echo "âš ï¸ ç«¶åˆç™ºç”Ÿã€ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯"
        gh issue edit "$ISSUE_ID" --remove-assignee @me
        continue
    fi
    
    # /run ç›¸å½“ã®å‡¦ç†ã‚’å®Ÿè¡Œï¼ˆã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã§ã¯ãªããƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§æŒ‡ç¤ºï¼‰
    echo "ğŸš€ Issue #$ISSUE_ID ã®å®Ÿè£…é–‹å§‹"
    claude -p "
Issue #$ISSUE_ID ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚

ä»¥ä¸‹ã®æ‰‹é †ã§é€²ã‚ã¦ãã ã•ã„:
1. gh issue view $ISSUE_ID ã§Issueã®å†…å®¹ã‚’ç¢ºèª
2. Git worktree ã‚’ä½œæˆ: git worktree add .claude/worktrees/task-$ISSUE_ID -b feature/issue-$ISSUE_ID
3. worktreeå†…ã§ä½œæ¥­
4. ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆï¼ˆtests/test_feature_$ISSUE_ID.pyï¼‰
5. å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆï¼ˆsrc/é…ä¸‹ï¼‰
6. pytest ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã€å¤±æ•—ã—ãŸã‚‰ä¿®æ­£ï¼ˆæœ€å¤§3å›ï¼‰
7. ruff check ã¨ mypy ã§ãƒã‚§ãƒƒã‚¯
8. git add -A && git commit && git push
9. gh pr create
10. gh issue comment ã§Issueã«å®Œäº†å ±å‘Š
11. worktree ã‚’å‰Šé™¤

é€”ä¸­ã§ç¢ºèªã‚’æ±‚ã‚ãªã„ã§ãã ã•ã„ã€‚ã‚¨ãƒ©ãƒ¼æ™‚ã¯Issueã«ã‚³ãƒ¡ãƒ³ãƒˆã—ã¦ãã ã•ã„ã€‚
" --allowedTools "Bash,Read,Write,Edit,Grep,Glob,WebFetch" \
  --output-format json > "/tmp/run_result_$ISSUE_ID.json" 2>&1 || true
    
    # çµæœç¢ºèª
    if [ -f "/tmp/run_result_$ISSUE_ID.json" ]; then
        echo "âœ… Issue #$ISSUE_ID å‡¦ç†å®Œäº†"
        
        # /merge ç›¸å½“ã®å‡¦ç†
        claude -p "
æœ€æ–°ã®PRã‚’mainã«ãƒãƒ¼ã‚¸ã—ã¦ãã ã•ã„ã€‚

æ‰‹é †:
1. gh pr list ã§å¯¾è±¡PRã‚’ç¢ºèª
2. gh pr merge --merge --delete-branch
3. git checkout main && git pull
4. pytest ã§çµ±åˆãƒ†ã‚¹ãƒˆ
5. å•é¡ŒãŒã‚ã‚Œã°ãƒã‚°Issueã‚’ä½œæˆ
" --allowedTools "Bash,Read,Write,Edit" \
  --output-format json > "/tmp/merge_result_$ISSUE_ID.json" 2>&1 || true
    else
        echo "âŒ Issue #$ISSUE_ID å‡¦ç†å¤±æ•—"
    fi
done

echo "ğŸ“Š è‡ªå‹•å‡¦ç†å®Œäº†"
```

**ä½¿ã„æ–¹**:
```bash
bash .claude/factory/auto_runner.sh
```

---

## ä¿®æ­£æ¡ˆ: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©

### åŸºæœ¬ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

```yaml
---
name: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå
description: ã„ã¤ã€ä½•ã®ãŸã‚ã«ä½¿ã†ã‹ã‚’1è¡Œã§æ˜ç¢ºã«ï¼ˆClaudeãŒè‡ªå‹•é¸æŠã«ä½¿ã†ï¼‰
tools: å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã®ã¿ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰
model: sonnet  # ã‚ªãƒ—ã‚·ãƒ§ãƒ³: sonnet / opus / haiku
---

# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå

**å½¹å‰²**: ...

**æ‰‹é †**: ...
```

---

### ä¿®æ­£ç‰ˆ: coder.md

```yaml
---
name: Coder
description: Pythonã‚³ãƒ¼ãƒ‰ã®å®Ÿè£…ã€‚è¨­è¨ˆæ›¸(docs/specs/feature-*.md)ã«åŸºã¥ã„ã¦src/é…ä¸‹ã«å®Ÿè£…ã—ã€pytestã‚’é€šã™
tools: Bash, Read, Write, Edit, Grep, Glob
---

ã‚ãªãŸã¯ç†Ÿç·´ã—ãŸPythonã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã™ã€‚

## å½¹å‰²

- è¨­è¨ˆæ›¸ã«åŸºã¥ãã€é«˜å“è³ªã§ä¿å®ˆæ€§ã®é«˜ã„ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè£…ã™ã‚‹
- ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™º(TDD)ã‚’æ¨å¥¨ã™ã‚‹

## å…¥åŠ›

- è¨­è¨ˆæ›¸: `docs/specs/feature-{id}.md`
- ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«: `tests/test_feature_{id}.py`ï¼ˆå­˜åœ¨ã™ã‚‹å ´åˆï¼‰

## å‡ºåŠ›

- å®Ÿè£…ã‚³ãƒ¼ãƒ‰: `src/` é…ä¸‹

## æ‰‹é †

1. è¨­è¨ˆæ›¸ã‚’èª­ã¿ã€è¦ä»¶ã‚’ç†è§£ã™ã‚‹
2. æ—¢å­˜ã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Œã°ç¢ºèª
3. å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆ
4. `uv run pytest tests/test_feature_{id}.py -v` ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
5. ãƒ†ã‚¹ãƒˆå¤±æ•—æ™‚ã¯ä¿®æ­£ï¼ˆæœ€å¤§3å›ãƒªãƒˆãƒ©ã‚¤ï¼‰
6. `uv run ruff check src/` ã¨ `uv run mypy src/` ã§ãƒã‚§ãƒƒã‚¯

## åˆ¶ç´„

- `.claude/rules/python.md` ã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã‚’éµå®ˆ
- æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã¨ã®æ•´åˆæ€§ã‚’ä¿ã¤
- å‹ãƒ’ãƒ³ãƒˆå¿…é ˆ
- docstringå¿…é ˆï¼ˆGoogle Styleã€æ—¥æœ¬èªï¼‰

## ä½œæ¥­ãƒ¡ãƒ¢

å®Ÿè£…ä¸­ã®å­¦ã³ã‚’ `.claude/factory/memos/issue-{id}-coder.md` ã«è¨˜éŒ²:
- ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä»•æ§˜ã®èªè­˜ãƒŸã‚¹ã¨ä¿®æ­£
- ã‚¨ãƒ©ãƒ¼ã¨è§£æ±ºæ–¹æ³•
- è©¦è¡ŒéŒ¯èª¤ã®ãƒ—ãƒ­ã‚»ã‚¹
```

---

### ä¿®æ­£ç‰ˆ: qa.md

```yaml
---
name: QA_Engineer
description: pytestãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®ä½œæˆã€‚è¨­è¨ˆæ›¸ã«åŸºã¥ã„ã¦tests/é…ä¸‹ã«ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
tools: Bash, Read, Write, Edit, Grep
---

ã‚ãªãŸã¯QAã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã™ã€‚

## å½¹å‰²

- è¨­è¨ˆæ›¸ã«åŸºã¥ãã€ç¶²ç¾…çš„ãªãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹
- æ­£å¸¸ç³»ã ã‘ã§ãªãã€ç•°å¸¸ç³»ãƒ»å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆã‚’é‡è¦–ã™ã‚‹

## å…¥åŠ›

- è¨­è¨ˆæ›¸: `docs/specs/feature-{id}.md`

## å‡ºåŠ›

- ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«: `tests/test_feature_{id}.py`

## æ‰‹é †

1. è¨­è¨ˆæ›¸ã‚’èª­ã¿ã€ãƒ†ã‚¹ãƒˆè¦³ç‚¹ã‚’æ´—ã„å‡ºã™
2. æ­£å¸¸ç³»ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ä½œæˆ
3. ç•°å¸¸ç³»ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ä½œæˆ
4. å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ä½œæˆ
5. `uv run pytest tests/test_feature_{id}.py -v` ã§æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ãŒãªã„ã“ã¨ã‚’ç¢ºèª
   - ã“ã®æ™‚ç‚¹ã§ãƒ†ã‚¹ãƒˆã¯å¤±æ•—ã—ã¦OKï¼ˆå®Ÿè£…ãŒãªã„ãŸã‚ï¼‰

## ãƒ†ã‚¹ãƒˆè¨­è¨ˆã®åŸå‰‡

- AAA ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆArrange, Act, Assertï¼‰
- 1ãƒ†ã‚¹ãƒˆ1ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæ¨å¥¨ï¼‰
- ãƒ¢ãƒƒã‚¯ï¼ˆunittest.mockï¼‰ã§å¤–éƒ¨ä¾å­˜ã‚’åˆ†é›¢
- ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ãƒ†ã‚¹ãƒˆï¼ˆ@pytest.mark.parametrizeï¼‰æ´»ç”¨

## ä½œæ¥­ãƒ¡ãƒ¢

ãƒ†ã‚¹ãƒˆä½œæˆä¸­ã®å­¦ã³ã‚’ `.claude/factory/memos/issue-{id}-qa.md` ã«è¨˜éŒ²
```

---

### ä¿®æ­£ç‰ˆ: tech_lead.md

```yaml
---
name: Tech_Lead
description: ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨å¤‰ç•°ãƒ†ã‚¹ãƒˆã€‚ruff/mypy/mutmutã‚’å®Ÿè¡Œã—ã€GitHub Issueã«çµæœã‚’ã‚³ãƒ¡ãƒ³ãƒˆ
tools: Bash, Read, Grep, WebFetch
---

ã‚ãªãŸã¯å³æ ¼ãªãƒ†ãƒƒã‚¯ãƒªãƒ¼ãƒ‰ã§ã™ã€‚

## å½¹å‰²

1. é™çš„è§£æï¼ˆruff, mypyï¼‰
2. å¤‰ç•°ãƒ†ã‚¹ãƒˆï¼ˆmutmutï¼‰
3. åˆæ ¼/ä¸åˆæ ¼ã‚’åˆ¤å®šã—ã€GitHub Issueã«ã‚³ãƒ¡ãƒ³ãƒˆ

## å…¥åŠ›

- Issue ID
- å¯¾è±¡ã‚³ãƒ¼ãƒ‰: `src/` é…ä¸‹

## å‡ºåŠ›

- GitHub Issueã¸ã®ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆâœ… Approved ã¾ãŸã¯ ğŸš¨ Rejectï¼‰

## æ‰‹é †

1. `uv run ruff check src/` ã§ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯
2. `uv run mypy src/` ã§å‹ãƒã‚§ãƒƒã‚¯
3. `uv run mutmut run --paths-to-mutate=src/` ã§å¤‰ç•°ãƒ†ã‚¹ãƒˆ
4. çµæœã‚’åˆ¤å®š:
   - å…¨ã¦ãƒ‘ã‚¹ â†’ `gh issue comment {id} --body "âœ… [Approved] å…¨ãƒã‚§ãƒƒã‚¯é€šé"`
   - å¤±æ•—ã‚ã‚Š â†’ `gh issue comment {id} --body "ğŸš¨ [Reject] (ç†ç”±ã¨æ”¹å–„ç­–)"`

## åˆ¤å®šåŸºæº–

| ãƒã‚§ãƒƒã‚¯ | åˆæ ¼åŸºæº– |
|----------|----------|
| ruff | ã‚¨ãƒ©ãƒ¼ 0ä»¶ |
| mypy | ã‚¨ãƒ©ãƒ¼ 0ä»¶ |
| mutmut | ã‚¹ã‚³ã‚¢ 80%ä»¥ä¸Š |

## é‡è¦

- å¿…ãš `gh issue comment` ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨
- ã‚³ãƒ¡ãƒ³ãƒˆã«ã¯å¿…ãš "âœ… [Approved]" ã¾ãŸã¯ "ğŸš¨ [Reject]" ã‚’å«ã‚ã‚‹ã“ã¨
```

---

### ä¿®æ­£ç‰ˆ: critic.md

```yaml
---
name: Critic
description: ä»•æ§˜æ›¸ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€‚docs/specs/project-*.mdã‚’èª­ã‚“ã§ã€APPROVEDã¾ãŸã¯REQUEST_CHANGESã‚’åˆ¤å®š
tools: Read, Grep, Glob
---

ã‚ãªãŸã¯å³æ ¼ãªã‚·ãƒ‹ã‚¢ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆã§ã™ã€‚

## å½¹å‰²

ä»•æ§˜æ›¸ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã€æ¬ é™¥ã‚„æ”¹å–„ç‚¹ã‚’æŒ‡æ‘˜ã™ã‚‹ã€‚

## å…¥åŠ›

- ä»•æ§˜æ›¸: `docs/specs/project-*.md`ï¼ˆæœ€æ–°ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

## å‡ºåŠ›

- `APPROVED` ã¾ãŸã¯ `REQUEST_CHANGES`ï¼ˆç†ç”±ä»˜ãï¼‰

## ãƒ¬ãƒ“ãƒ¥ãƒ¼è¦³ç‚¹

| è¦³ç‚¹ | ãƒã‚§ãƒƒã‚¯å†…å®¹ |
|------|-------------|
| æ˜ç¢ºã• | æ›–æ˜§ãªè¡¨ç¾ãŒãªã„ã‹ |
| å®Ÿç¾å¯èƒ½æ€§ | æŠ€è¡“çš„ã«å®Ÿè£…å¯èƒ½ã‹ |
| çŸ›ç›¾ | è¦ä»¶é–“ã§çŸ›ç›¾ãŒãªã„ã‹ |
| ç¶²ç¾…æ€§ | ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®è€ƒæ…® |
| åˆ†å‰²å¦¥å½“æ€§ | ã‚¿ã‚¹ã‚¯åˆ†å‰²ãŒé©åˆ‡ã‹ |

## å‡ºåŠ›å½¢å¼

### å•é¡ŒãŒã‚ã‚‹å ´åˆ

```
REQUEST_CHANGES

## ä¿®æ­£ãŒå¿…è¦ãªç‚¹

1. **[å•é¡Œç‚¹1]**: å…·ä½“çš„ãªèª¬æ˜
   - æ¨å¥¨ä¿®æ­£: ...

2. **[å•é¡Œç‚¹2]**: ...

`/spec` ã‚’å†å®Ÿè¡Œã—ã¦ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚
```

### å•é¡ŒãŒãªã„å ´åˆ

```
APPROVED

ä»•æ§˜æ›¸ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒå®Œäº†ã—ã¾ã—ãŸã€‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚

æ¬¡ã¯ `/breakdown` ã§ Issue ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
```
```

---

### ä¿®æ­£ç‰ˆ: validator.md

```yaml
---
name: Validator
description: ãƒãƒ¼ã‚¸å¾Œã®çµ±åˆæ¤œè¨¼ã€‚pytest/ruff/mypyã‚’å®Ÿè¡Œã—ã€å¤±æ•—æ™‚ã¯ãƒã‚°Issueã‚’ä½œæˆ
tools: Bash, Read, Write, Grep
---

ã‚ãªãŸã¯å³æ ¼ãªçµ±åˆæ¤œè¨¼ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã™ã€‚

## å½¹å‰²

PRãŒmainãƒ–ãƒ©ãƒ³ãƒã«ãƒãƒ¼ã‚¸ã•ã‚ŒãŸå¾Œã€ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã“ã¨ã‚’æ¤œè¨¼ã€‚

## å…¥åŠ›

- ãƒãƒ¼ã‚¸æ¸ˆã¿ã®mainãƒ–ãƒ©ãƒ³ãƒ

## å‡ºåŠ›

- æ¤œè¨¼çµæœï¼ˆPASSED / FAILEDï¼‰
- å¤±æ•—æ™‚: ãƒã‚°Issueï¼ˆ`label:bug`, `label:todo`ï¼‰

## æ‰‹é †

1. `git checkout main && git pull`
2. `uv run pytest -v --tb=short`
3. `uv run ruff check src/`
4. `uv run mypy src/`
5. `uv run python -c "from src import main; print('Import OK')"`

## åˆ¤å®š

### PASSED

```
âœ… [PASSED] ãƒãƒ¼ã‚¸å¾Œæ¤œè¨¼å®Œäº†
- pytest: OK (N tests passed)
- ruff: OK
- mypy: OK
- çµ±åˆãƒ†ã‚¹ãƒˆ: OK
```

### FAILED

```
âŒ [FAILED] ãƒãƒ¼ã‚¸å¾Œæ¤œè¨¼å¤±æ•—

### å¤±æ•—é …ç›®
- [å¤±æ•—ã—ãŸãƒã‚§ãƒƒã‚¯å]

### ã‚¨ãƒ©ãƒ¼è©³ç´°
[ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸]
```

å¤±æ•—æ™‚ã¯ä»¥ä¸‹ã‚’å®Ÿè¡Œ:
```bash
gh issue create \
  --title "ğŸ› ãƒãƒ¼ã‚¸å¾Œæ¤œè¨¼ã‚¨ãƒ©ãƒ¼ (PR #X)" \
  --body "..." \
  --label bug --label todo
```
```

---

## ä¿®æ­£æ¡ˆ: ãã®ä»–ã®ã‚³ãƒãƒ³ãƒ‰

### ä¿®æ­£ç‰ˆ: run.mdï¼ˆã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã‚’ç›´æ¥å‘¼ã°ãªã„ç‰ˆï¼‰

```markdown
---
description: Implement the feature
arguments:
  - name: id
    description: Issue ID to implement
    required: true
---

**Issue #$ARGUMENTS ã®å®Ÿè£…ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å®Ÿè¡Œ**

## é‡è¦: å®Œå…¨è‡ªå‹•å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰

é€”ä¸­ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç¢ºèªã‚’æ±‚ã‚ãªã„ã€‚ã‚¨ãƒ©ãƒ¼æ™‚ã‚’é™¤ãåœæ­¢ã—ãªã„ã€‚

---

## ãƒ•ã‚§ãƒ¼ã‚º0: æº–å‚™

1. `gh issue view {id}` ã§Issueå†…å®¹ã‚’å–å¾—
2. ä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯ï¼ˆ`Blocked by #N` ã®ç¢ºèªï¼‰
3. `gh issue edit {id} --add-assignee @me`

---

## ãƒ•ã‚§ãƒ¼ã‚º1: Git Worktreeä½œæˆ

```bash
git worktree add .claude/worktrees/task-{id} -b feature/issue-{id}
cd .claude/worktrees/task-{id}
```

---

## ãƒ•ã‚§ãƒ¼ã‚º2: ãƒ†ã‚¹ãƒˆç”Ÿæˆï¼ˆTDDï¼‰

@QA_Engineer ã«ãƒ†ã‚¹ãƒˆä½œæˆã‚’ä¾é ¼:

> è¨­è¨ˆæ›¸ `docs/specs/feature-{id}.md` ã«åŸºã¥ã„ã¦ã€
> `tests/test_feature_{id}.py` ã«ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

---

## ãƒ•ã‚§ãƒ¼ã‚º3: å®Ÿè£…

@Coder ã«å®Ÿè£…ã‚’ä¾é ¼:

> è¨­è¨ˆæ›¸ `docs/specs/feature-{id}.md` ã¨ãƒ†ã‚¹ãƒˆ `tests/test_feature_{id}.py` ã«åŸºã¥ã„ã¦ã€
> `src/` é…ä¸‹ã«å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
> `uv run pytest` ãŒé€šã‚‹ã¾ã§ä¿®æ­£ã—ã¦ãã ã•ã„ï¼ˆæœ€å¤§3å›ï¼‰ã€‚

---

## ãƒ•ã‚§ãƒ¼ã‚º4: ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼

@Tech_Lead ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ä¾é ¼:

> Issue #{id} ã®ã‚³ãƒ¼ãƒ‰ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ãã ã•ã„ã€‚
> ruff, mypy, mutmut ã‚’å®Ÿè¡Œã—ã€çµæœã‚’Issueã«ã‚³ãƒ¡ãƒ³ãƒˆã—ã¦ãã ã•ã„ã€‚

---

## ãƒ•ã‚§ãƒ¼ã‚º5: PRä½œæˆ

```bash
git add -A
git commit -m "feat: Resolve #{id} - [ã‚¿ã‚¤ãƒˆãƒ«]"
git push origin HEAD --force-with-lease
gh pr create --title "feat: Resolve #{id}" --body "..."
gh issue comment {id} --body "âœ… å®Ÿè£…å®Œäº† PR #X ã‚’ä½œæˆã—ã¾ã—ãŸ"
```

---

## ãƒ•ã‚§ãƒ¼ã‚º6: ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

```bash
cd ../..
git worktree remove .claude/worktrees/task-{id}
git worktree prune
```

---

## ã‚¨ãƒ©ãƒ¼æ™‚

1. Issueã«å¤±æ•—ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿
2. `gh issue edit {id} --remove-assignee @me --add-label failed`
3. worktreeã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
```

---

### ä¿®æ­£ç‰ˆ: impl.md

```markdown
---
description: Implement the feature
arguments:
  - name: id
    description: Issue ID
    required: true
---

@Coder

**Issue #$ARGUMENTS ã®å®Ÿè£…**

## å…¥åŠ›

- è¨­è¨ˆæ›¸: `docs/specs/feature-$ARGUMENTS.md`
- ãƒ†ã‚¹ãƒˆ: `tests/test_feature_$ARGUMENTS.py`

## æŒ‡ç¤º

1. è¨­è¨ˆæ›¸ã‚’èª­ã‚“ã§è¦ä»¶ã‚’ç†è§£
2. ãƒ†ã‚¹ãƒˆã‚’ç¢ºèª
3. `src/` é…ä¸‹ã«å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆ
4. `uv run pytest tests/test_feature_$ARGUMENTS.py -v` ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
5. å¤±æ•—ã—ãŸã‚‰ä¿®æ­£ï¼ˆæœ€å¤§3å›ãƒªãƒˆãƒ©ã‚¤ï¼‰
6. `uv run ruff check src/` ã¨ `uv run mypy src/` ã§ãƒã‚§ãƒƒã‚¯

## åˆ¶ç´„

- `.claude/rules/python.md` ã‚’éµå®ˆ
- å‹ãƒ’ãƒ³ãƒˆå¿…é ˆ
- docstringå¿…é ˆï¼ˆGoogle Styleã€æ—¥æœ¬èªï¼‰
```

---

### ä¿®æ­£ç‰ˆ: test.md

```markdown
---
description: Generate test cases
arguments:
  - name: id
    description: Issue ID
    required: true
---

@QA_Engineer

**Issue #$ARGUMENTS ã®ãƒ†ã‚¹ãƒˆä½œæˆ**

## å…¥åŠ›

- è¨­è¨ˆæ›¸: `docs/specs/feature-$ARGUMENTS.md`

## å‡ºåŠ›

- ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«: `tests/test_feature_$ARGUMENTS.py`

## æŒ‡ç¤º

1. è¨­è¨ˆæ›¸ã‚’èª­ã‚“ã§ãƒ†ã‚¹ãƒˆè¦³ç‚¹ã‚’æ´—ã„å‡ºã™
2. æ­£å¸¸ç³»ãƒ†ã‚¹ãƒˆã‚’ä½œæˆ
3. ç•°å¸¸ç³»ãƒ†ã‚¹ãƒˆã‚’ä½œæˆ
4. å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆã‚’ä½œæˆ
5. `uv run pytest tests/test_feature_$ARGUMENTS.py -v` ã§æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ãŒãªã„ã“ã¨ã‚’ç¢ºèª

## æ³¨æ„

- å®Ÿè£…ãŒãªã„çŠ¶æ…‹ã§ã‚‚ãƒ†ã‚¹ãƒˆãŒå®Ÿè¡Œå¯èƒ½ãªã‚ˆã†ã«
- å¿…è¦ã«å¿œã˜ã¦Mockã‚’ä½¿ç”¨
```

---

### ä¿®æ­£ç‰ˆ: review.md

```markdown
---
description: Review code and run mutation tests
arguments:
  - name: id
    description: Issue ID
    required: true
---

@Tech_Lead

**Issue #$ARGUMENTS ã®ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼**

## å®Ÿè¡Œå†…å®¹

1. `uv run ruff check src/` - ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯
2. `uv run mypy src/` - å‹ãƒã‚§ãƒƒã‚¯
3. `uv run mutmut run` - å¤‰ç•°ãƒ†ã‚¹ãƒˆ

## åˆ¤å®š

å…¨ã¦ãƒ‘ã‚¹ã—ãŸå ´åˆ:
```bash
gh issue comment $ARGUMENTS --body "âœ… [Approved] å…¨ãƒã‚§ãƒƒã‚¯é€šé"
```

å¤±æ•—ã—ãŸå ´åˆ:
```bash
gh issue comment $ARGUMENTS --body "ğŸš¨ [Reject] (ç†ç”±ã¨æ”¹å–„ç­–)"
```

## åˆ¤å®šåŸºæº–

- ruff: ã‚¨ãƒ©ãƒ¼ 0ä»¶
- mypy: ã‚¨ãƒ©ãƒ¼ 0ä»¶
- mutmut: ã‚¹ã‚³ã‚¢ 80%ä»¥ä¸Š
```

---

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã®è¨­è¨ˆåŸå‰‡

| åŸå‰‡ | èª¬æ˜ |
|------|------|
| å˜ä¸€è²¬ä»» | 1ã‚³ãƒãƒ³ãƒ‰ = 1ã¤ã®æ˜ç¢ºãªç›®çš„ |
| è‡ªå·±å®Œçµ | ä»–ã®ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã«ä¾å­˜ã—ãªã„ |
| ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ´»ç”¨ | è¤‡é›‘ãªå‡¦ç†ã¯ `@ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå` ã§å§”è­² |
| ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆç®¡ç† | é•·ã„ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å¾Œã¯ `/compact` |

### 2. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®è¨­è¨ˆåŸå‰‡

| åŸå‰‡ | èª¬æ˜ |
|------|------|
| æ˜ç¢ºãªdescription | ClaudeãŒè‡ªå‹•é¸æŠã§ãã‚‹ã‚ˆã†ã« |
| æœ€å°é™ã®tools | å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã®ã¿è¨±å¯ |
| å…¥å‡ºåŠ›ã®æ˜ç¤º | ä½•ã‚’å—ã‘å–ã‚Šä½•ã‚’å‡ºåŠ›ã™ã‚‹ã‹ |
| åˆ¤å®šåŸºæº–ã®æ˜ç¤º | æˆåŠŸ/å¤±æ•—ã®åŸºæº–ã‚’æ˜ç¢ºã« |

### 3. è‡ªå‹•åŒ–ã®è¨­è¨ˆåŸå‰‡

| ã‚„ã‚‹ã¹ãã“ã¨ | ã‚„ã£ã¦ã¯ã„ã‘ãªã„ã“ã¨ |
|--------------|----------------------|
| `claude -p "ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ–‡"` | `claude -p "/ã‚³ãƒãƒ³ãƒ‰"` |
| `/compact` ã§ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆç®¡ç† | ç„¡é™ãƒ«ãƒ¼ãƒ—ã«ä»»ã›ã‚‹ |
| å¤–éƒ¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ | æ·±ã„ã‚³ãƒãƒ³ãƒ‰ãƒã‚¹ãƒˆ |
| ã‚¨ãƒ©ãƒ¼æ™‚ã®æ˜ç¢ºãªçµ‚äº†æ¡ä»¶ | ã‚µã‚¤ãƒ¬ãƒ³ãƒˆå¤±æ•— |

### 4. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

| ç—‡çŠ¶ | åŸå›  | å¯¾å‡¦ |
|------|------|------|
| `No stdout output available` | `claude -p "/cmd"` | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ–‡ã«å¤‰æ›´ |
| ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå‹•ã‹ãªã„ | ãƒã‚¹ãƒˆã—ãŸTask | æ§‹é€ ã‚’ãƒ•ãƒ©ãƒƒãƒˆã« |
| ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ | `/compact` æœªä½¿ç”¨ | å®šæœŸçš„ã« `/compact` |
| ç„¡é™ãƒ«ãƒ¼ãƒ— | çµ‚äº†æ¡ä»¶ãªã— | æ˜ç¢ºãªçµ‚äº†æ¡ä»¶ã‚’è¿½åŠ  |

---

## ç§»è¡Œãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] `auto.md` ã® `claude -p "/run"` ã‚’ä¿®æ­£
- [ ] `auto.md` ã® `claude -p "/merge"` ã‚’ä¿®æ­£
- [ ] `pm.md` ã® `claude -p "/critique"` ã‚’ä¿®æ­£ï¼ˆè¨˜è¼‰ãŒã‚ã‚‹å ´åˆï¼‰
- [ ] å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã« `tools` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ 
- [ ] å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã® `description` ã‚’å…·ä½“åŒ–
- [ ] `/compact` ã‚’ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«çµ„ã¿è¾¼ã¿
- [ ] å¤–éƒ¨ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼ˆoptionï¼‰ã®ä½œæˆ

---

## å‚è€ƒãƒªãƒ³ã‚¯

- [Claude Code Docs - Slash Commands](https://docs.claude.com/en/docs/claude-code/slash-commands)
- [Claude Code Docs - Subagents](https://docs.claude.com/en/docs/claude-code/sub-agents)
- [Claude Code Docs - Headless Mode](https://docs.claude.com/en/docs/claude-code/headless)
- [Anthropic - Claude Code Best Practices](https://www.anthropic.com/engineering/claude-code-best-practices)
